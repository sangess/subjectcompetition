{"version":3,"sources":["webpack:///./src/views/student/student_work.vue?06f5","webpack:///src/views/student/student_work.vue","webpack:///./src/views/student/student_work.vue?a12f","webpack:///./src/views/student/student_work.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","model","value","callback","$$v","workOrUpload","expression","attrs","ref","staticStyle","form","rules","$set","_l","project","key","id","projectName","comp","compState","fileList","uploadChange","handleRemove","_v","staticClass","slot","on","$event","submitUpload","tabPosition","unOrEd","handOutWorks","scopedSlots","_u","fn","props","row","workFile","index","_s","fileTip","String","fileName","api","editId","dialogTableVisible","deleteWorkFile","scope","score","ifMark","unHandOutWorks","_f","notApplyTime","occurrenceTime","markWorks","file","editChange","editWorkFile","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d0f07a5.c7a37a67.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',[_c('el-tabs',{model:{value:(_vm.workOrUpload),callback:function ($$v) {_vm.workOrUpload=$$v},expression:\"workOrUpload\"}},[_c('el-tab-pane',{attrs:{\"label\":\"作品提交\",\"name\":\"upload\"}},[_c('el-form',{ref:\"form\",staticStyle:{\"width\":\"520px\"},attrs:{\"model\":_vm.form,\"label-width\":\"120px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"作品名\",\"prop\":\"workName\"}},[_c('el-input',{attrs:{\"name\":\"workName\"},model:{value:(_vm.form.workName),callback:function ($$v) {_vm.$set(_vm.form, \"workName\", $$v)},expression:\"form.workName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"上交的项目\",\"prop\":\"projectId\"}},[_c('el-select',{attrs:{\"name\":\"projectId\",\"placeholder\":\"请选择需要上交的项目\"},model:{value:(_vm.form.projectId),callback:function ($$v) {_vm.$set(_vm.form, \"projectId\", $$v)},expression:\"form.projectId\"}},_vm._l((_vm.myProjects),function(project){return _c('el-option',{key:project.id,attrs:{\"label\":project.projectName,\"value\":project.id,\"disabled\":project.comp.compState>2}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"上传文件\"}},[_c('el-upload',{ref:\"upload\",attrs:{\"name\":\"files\",\"action\":\"/url\",\"limit\":5,\"multiple\":\"\",\"file-list\":_vm.fileList,\"with-credentials\":true,\"on-change\":_vm.uploadChange,\"on-remove\":_vm.handleRemove,\"auto-upload\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"最多上传5个文件，单个文件大小不得超过100MB,一共大小不得超过200MB\")])],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitUpload('form')}}},[_vm._v(\"确认上交\")])],1)],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"作品管理\",\"name\":\"work\"}},[_c('el-tabs',{attrs:{\"tab-position\":_vm.tabPosition},model:{value:(_vm.unOrEd),callback:function ($$v) {_vm.unOrEd=$$v},expression:\"unOrEd\"}},[_c('el-tab-pane',{attrs:{\"label\":\"已提交\",\"name\":\"Ed\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.handOutWorks}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-form',{staticStyle:{\"background-color\":\"rgba(146,255,152,0.58)\",\"border-radius\":\"20px\"},attrs:{\"label-position\":\"right\"}},_vm._l((props.row.workFiles),function(workFile,index){return _c('el-form-item',{key:workFile.id,attrs:{\"inline\":\"\"}},[_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{attrs:{\"span\":2}},[_c('span',{staticStyle:{\"color\":\"#1402bf\",\"float\":\"right\"}},[_vm._v(_vm._s(_vm.fileTip+String((index+1))))])]),_c('el-col',{attrs:{\"span\":10}},[_c('span',[_vm._v(_vm._s(workFile.fileName))])]),_c('el-col',{attrs:{\"span\":3}},[_c('a',{attrs:{\"href\":_vm.api+\"/file/downloadFile/\"+workFile.id}},[_c('el-link',{attrs:{\"icon\":\"el-icon-download\",\"underline\":false}},[_vm._v(\"下载附件\")])],1)]),_c('el-col',{attrs:{\"span\":3}},[_c('el-link',{attrs:{\"icon\":\"el-icon-edit\",\"underline\":false},on:{\"click\":function($event){_vm.editId=workFile.id,_vm.dialogTableVisible=true}}},[_vm._v(\"修改\")])],1),_c('el-col',{attrs:{\"span\":3}},[_c('el-popconfirm',{attrs:{\"title\":\"删除该文件？操作不可逆！\"},on:{\"confirm\":function($event){return _vm.deleteWorkFile(workFile.id)}}},[_c('el-link',{attrs:{\"slot\":\"reference\",\"icon\":\"el-icon-delete\",\"underline\":false},slot:\"reference\"},[_vm._v(\"删除\")])],1)],1)],1)],1)}),1)]}}])}),_c('el-table-column',{attrs:{\"label\":\"竞赛 ID\",\"prop\":\"project.comp.id\"}}),_c('el-table-column',{attrs:{\"label\":\"竞赛名\",\"prop\":\"project.comp.compName\"}}),_c('el-table-column',{attrs:{\"label\":\"项目名\",\"prop\":\"project.projectName\"}}),_c('el-table-column',{attrs:{\"label\":\"作品名\",\"prop\":\"workName\"}}),_c('el-table-column',{attrs:{\"label\":\"作品得分\",\"prop\":\"score\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                \"+_vm._s(scope.row.score)+_vm._s(scope.row.ifMark==false?'(未打分)':'')+\"\\n              \")]}}])})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"待提交\",\"name\":\"un\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.unHandOutWorks}},[_c('el-table-column',{attrs:{\"label\":\"竞赛 ID\",\"prop\":\"comp.id\"}}),_c('el-table-column',{attrs:{\"label\":\"竞赛名\",\"prop\":\"comp.compName\"}}),_c('el-table-column',{attrs:{\"label\":\"项目名\",\"prop\":\"projectName\"}}),_c('el-table-column',{attrs:{\"label\":\"截至报名日期\",\"prop\":\"comp.notApplyTime\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                \"+_vm._s(_vm._f(\"dataTime\")(scope.row.comp.notApplyTime))+\"\\n              \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"比赛时间\",\"prop\":\"comp.occurrenceTime\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                \"+_vm._s(_vm._f(\"dataTime\")(scope.row.comp.occurrenceTime))+\"\\n              \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"状态\",\"prop\":\"projectName\"}},[_c('el-button',{attrs:{\"type\":\"warning\",\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.workOrUpload='upload'}}},[_vm._v(\"尚未提交作品\")])],1)],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"已评分\",\"name\":\"mark\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.markWorks}},[_c('el-table-column',{attrs:{\"label\":\"竞赛 ID\",\"prop\":\"project.comp.id\"}}),_c('el-table-column',{attrs:{\"label\":\"竞赛名\",\"prop\":\"project.comp.compName\"}}),_c('el-table-column',{attrs:{\"label\":\"项目名\",\"prop\":\"project.projectName\"}}),_c('el-table-column',{attrs:{\"label\":\"作品名\",\"prop\":\"workName\"}}),_c('el-table-column',{attrs:{\"label\":\"作品得分\",\"prop\":\"score\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                \"+_vm._s(scope.row.score)+_vm._s(scope.row.score==0?'(未打分)':'')+\"\\n              \")]}}])})],1)],1)],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改文件\",\"visible\":_vm.dialogTableVisible},on:{\"update:visible\":function($event){_vm.dialogTableVisible=$event}}},[_c('el-upload',{attrs:{\"name\":\"edit\",\"action\":\"/url\",\"limit\":1,\"file\":_vm.file,\"with-credentials\":true,\"on-change\":_vm.editChange,\"on-remove\":_vm.handleRemove,\"auto-upload\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"选择文件\")])],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogTableVisible=false}}},[_vm._v(\"取消修改\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.editWorkFile()}}},[_vm._v(\"确认修改\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-card>\r\n    <el-tabs  v-model=\"workOrUpload\">\r\n      <el-tab-pane label=\"作品提交\" name=\"upload\">\r\n        <el-form ref=\"form\" style=\"width: 520px\"  :model=\"form\" label-width=\"120px\" :rules=\"rules\">\r\n      <el-form-item  label=\"作品名\" prop=\"workName\">\r\n        <el-input v-model=\"form.workName\" name=\"workName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item  label=\"上交的项目\" prop=\"projectId\">\r\n        <el-select v-model=\"form.projectId\" name=\"projectId\" placeholder=\"请选择需要上交的项目\">\r\n          <el-option v-for=\"project in myProjects\"\r\n                      :key=\"project.id\"\r\n                      :label=\"project.projectName\"\r\n                      :value=\"project.id\"\r\n                      :disabled=\"project.comp.compState>2\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"上传文件\">\r\n        <el-upload\r\n                name=\"files\"\r\n                ref=\"upload\"\r\n                action=\"/url\"\r\n                :limit=\"5\"\r\n                multiple\r\n                :file-list=\"fileList\"\r\n                :with-credentials=\"true\"\r\n                :on-change=\"uploadChange\"\r\n                :on-remove=\"handleRemove\"\r\n                :auto-upload=\"false\">\r\n          <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          <div slot=\"tip\" class=\"el-upload__tip\">最多上传5个文件，单个文件大小不得超过100MB,一共大小不得超过200MB</div>\r\n        </el-upload>\r\n        <!--\r\n                :data=\"formData\"\r\n                :on-success=\"upFile\"\r\n                :on-remove=\"handleRemove\"\r\n                :on-exceed=\"handleExceed\"-->\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitUpload('form')\">确认上交</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"作品管理\" name=\"work\">\r\n        <el-tabs  v-model=\"unOrEd\" :tab-position=\"tabPosition\">\r\n          <el-tab-pane label=\"已提交\" name=\"Ed\">\r\n            <el-table :data=\"handOutWorks\" style=\"width: 100%\">\r\n              <el-table-column type=\"expand\">\r\n                <template slot-scope=\"props\">\r\n                  <el-form label-position=\"right\" style=\"background-color: rgba(146,255,152,0.58);border-radius: 20px\" >\r\n                    <el-form-item inline  v-for=\"(workFile,index) in props.row.workFiles\" :key =\"workFile.id\" >\r\n                      <el-row :gutter=\"40\">\r\n                        <el-col :span=\"2\"> <span style=\"color: #1402bf;float: right\">{{ fileTip+String((index+1))}}</span></el-col>\r\n                        <el-col :span=\"10\"> <span>{{ workFile.fileName}}</span></el-col>\r\n                        <el-col :span=\"3\"><a :href='api+\"/file/downloadFile/\"+workFile.id'><el-link icon=\"el-icon-download\" :underline=\"false\">下载附件</el-link></a></el-col>\r\n                        <el-col :span=\"3\"><el-link icon=\"el-icon-edit\" @click=\"editId=workFile.id,dialogTableVisible=true\" :underline=\"false\">修改</el-link></el-col>\r\n                        <el-col :span=\"3\">\r\n                          <el-popconfirm title=\"删除该文件？操作不可逆！\" @confirm=\"deleteWorkFile(workFile.id)\">\r\n                            <el-link icon=\"el-icon-delete\"  slot=\"reference\" :underline=\"false\">删除</el-link>\r\n                          </el-popconfirm>\r\n                        </el-col>\r\n                      </el-row>\r\n                    </el-form-item>\r\n                  </el-form>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"竞赛 ID\" prop=\"project.comp.id\"></el-table-column>\r\n              <el-table-column label=\"竞赛名\" prop=\"project.comp.compName\"></el-table-column>\r\n              <el-table-column label=\"项目名\" prop=\"project.projectName\"></el-table-column>\r\n              <el-table-column label=\"作品名\" prop=\"workName\"></el-table-column>\r\n              <el-table-column label=\"作品得分\" prop=\"score\">\r\n                <template slot-scope=\"scope\">\r\n                  {{scope.row.score}}{{scope.row.ifMark==false?'(未打分)':''}}\r\n                </template>\r\n              </el-table-column>\r\n        </el-table>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"待提交\" name=\"un\">\r\n            <el-table :data=\"unHandOutWorks\" style=\"width: 100%\">\r\n              <el-table-column label=\"竞赛 ID\" prop=\"comp.id\"></el-table-column>\r\n              <el-table-column label=\"竞赛名\" prop=\"comp.compName\"></el-table-column>\r\n              <el-table-column label=\"项目名\" prop=\"projectName\"></el-table-column>\r\n              <el-table-column label=\"截至报名日期\" prop=\"comp.notApplyTime\">\r\n                <template slot-scope=\"scope\">\r\n                  {{scope.row.comp.notApplyTime|dataTime}}\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"比赛时间\" prop=\"comp.occurrenceTime\">\r\n                <template slot-scope=\"scope\">\r\n                  {{scope.row.comp.occurrenceTime|dataTime}}\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"状态\" prop=\"projectName\">\r\n                <el-button type=\"warning\" plain size=\"mini\" @click=\"workOrUpload='upload'\">尚未提交作品</el-button>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"已评分\" name=\"mark\">\r\n            <el-table :data=\"markWorks\" style=\"width: 100%\">\r\n              <el-table-column label=\"竞赛 ID\" prop=\"project.comp.id\"></el-table-column>\r\n              <el-table-column label=\"竞赛名\" prop=\"project.comp.compName\"></el-table-column>\r\n              <el-table-column label=\"项目名\" prop=\"project.projectName\"></el-table-column>\r\n              <el-table-column label=\"作品名\" prop=\"workName\"></el-table-column>\r\n              <el-table-column label=\"作品得分\" prop=\"score\">\r\n                <template slot-scope=\"scope\">\r\n                  {{scope.row.score}}{{scope.row.score==0?'(未打分)':''}}\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n    <el-dialog  title=\"修改文件\" :visible.sync=\"dialogTableVisible\">\r\n      <el-upload\r\n              name=\"edit\"\r\n              action=\"/url\"\r\n              :limit=\"1\"\r\n              :file=\"file\"\r\n              :with-credentials=\"true\"\r\n              :on-change=\"editChange\"\r\n              :on-remove=\"handleRemove\"\r\n              :auto-upload=\"false\">\r\n        <el-button size=\"small\" type=\"primary\">选择文件</el-button>\r\n      </el-upload>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogTableVisible=false\">取消修改</el-button>\r\n        <el-button type=\"primary\" @click=\"editWorkFile()\">确认修改</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-card>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n  import api from \"../../main\";\r\n  export default {\r\n    inject:['reload'],\r\n    name: \"student_work\",\r\n    data() {\r\n      return {\r\n        markWorks:[],\r\n        editId:\"\",\r\n        file:\"\",\r\n        dialogTableVisible:false,\r\n        api:api,\r\n        fileTip:\"附件\",\r\n        handOutWorks:[],\r\n        unHandOutWorks:[],\r\n        workOrUpload:\"upload\",\r\n        tabPosition:'left',\r\n        unOrEd:'Ed',\r\n        form:{\r\n          workName:\"\",\r\n          projectId:\"\",\r\n        },\r\n        fileList:[],\r\n        myProjects:[],\r\n        rules:{\r\n          workName:[\r\n              { required: true, message: \"请填写作品名称\", trigger: \"blur\" }\r\n          ],\r\n          projectId:[\r\n            { required: true, message: \"请选择提交的项目\", trigger: \"blur\" }\r\n          ]\r\n        },\r\n      }\r\n    },\r\n    mounted(){\r\n      this.showMyComps();\r\n      this.getHandOutWorks();\r\n      this.getUnHandOutWorks();\r\n      this.getWorksMark();\r\n    },\r\n    methods:{\r\n      /**\r\n       * 显示学生所有的项目\r\n       */\r\n      showMyComps(){\r\n        let that=this;\r\n        let studentId=that.$store.state.id;\r\n        that.$axios\r\n        .get(api+`/project/getStudentProjects/`+studentId)\r\n        .then(function (response) {\r\n          that.myProjects=response.data;\r\n        })\r\n      },\r\n      submitUpload(form){\r\n        let that =this;\r\n        let dataForm=new FormData();\r\n        that.$refs[form].validate(valid=>{\r\n          if(valid){\r\n            dataForm.append(\"workName\",that.form.workName);\r\n            dataForm.append(\"projectId\",that.form.projectId);\r\n            for(let i=0;i<that.fileList.length;i++){\r\n              dataForm.append(\"uploadFile\",that.fileList[i].raw);\r\n            }\r\n            that.$axios({\r\n              url:api+`/student/workUpload`,\r\n              method:\"post\",\r\n              data:dataForm,\r\n              headers: {\r\n                \"Content-Type\":\"multipart/form-data\"\r\n              }\r\n            })\r\n            .then(function (response) {\r\n              that.$message({\r\n                type:response.data.code==200?'success':'error',\r\n                message:response.data.message\r\n              });\r\n              that.reload();\r\n              that.workOrUpload=\"work\";\r\n            })\r\n          }else{\r\n            that.$message.error(\"请正确填写作品信息！\");\r\n            return false;\r\n          }\r\n        })\r\n      },\r\n      uploadChange(file, filelist){\r\n        this.fileList=filelist;\r\n      },\r\n      editChange(file, filelist){\r\n        let that=this;\r\n        that.file=filelist;\r\n      },\r\n      // 文件移除时的钩子\r\n      handleRemove(file, fileList) {\r\n        this.filelist = fileList\r\n      },\r\n      /**\r\n       * 得到交过作品的列表\r\n       */\r\n      getHandOutWorks(){\r\n        let that =this;\r\n        that.$axios\r\n          .get(api+'/student/getHandOutWorks/'+that.$store.state.id)\r\n          .then(function (response) {\r\n            that.handOutWorks=response.data;\r\n          })\r\n      },\r\n      /**\r\n       * 得到待提交作品的列表\r\n       */\r\n      getUnHandOutWorks(){\r\n        let that =this;\r\n        that.$axios\r\n        .get(api+'/student/getUnHandOutWorks/'+that.$store.state.id)\r\n        .then(function (response) {\r\n          that.unHandOutWorks=response.data;\r\n          console.log(that.unHandOutWorks);\r\n        })\r\n      },\r\n      editWorkFile(workFileId){\r\n        let that =this;\r\n        console.log(that.file[0].raw);\r\n        console.log(that.editId);\r\n        let data=new FormData();\r\n        data.append(\"workFileId\",that.editId);\r\n        data.append(\"workFile\",that.file[0].raw);\r\n        that.$axios({\r\n          url:api+`/student/editWork`,\r\n          method:\"post\",\r\n          data:data,\r\n          headers: {\r\n            \"Content-Type\":\"multipart/form-data\"\r\n          }\r\n        })\r\n          .then(function (response) {\r\n            that.$message({\r\n              type:response.data.code==200?'success':'error',\r\n              message:response.data.message\r\n            });\r\n            that.reload();\r\n            that.workOrUpload=\"work\";\r\n          })\r\n      },\r\n      deleteWorkFile(workFileId){\r\n        let that=this;\r\n        that.$axios\r\n          .get(api+\"/student/deleteWorkFile/\"+workFileId)\r\n          .then(function (response) {\r\n            that.$message({\r\n              type:response.data.code==200?'success':'error',\r\n              message:response.data.message\r\n            });\r\n            that.reload();\r\n            that.workOrUpload=\"work\";\r\n          })\r\n      },\r\n      getWorksMark(){\r\n        let that =this;\r\n        that.$axios\r\n        .get(api+'/student/getWorksMark/'+that.$store.state.id)\r\n        .then(function (response) {\r\n          that.markWorks=response.data;\r\n        })\r\n      }\r\n    },\r\n    filters:{\r\n      dataTime: function(value) {\r\n        if (value==undefined)\r\n          return '-';\r\n        value = new Date(value)\r\n        if (value instanceof Date) {\r\n          var d = value;\r\n          var year=d.getFullYear();\r\n          var m = d.getMonth() + 1;\r\n          var day = d.getDate() < 10 ? '0' + d.getDate() : d.getDate();\r\n          var myDate = year + '年'+m + '月 ' + day +'日';\r\n          return myDate;\r\n        } else {\r\n          return \"-\";\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./student_work.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./student_work.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./student_work.vue?vue&type=template&id=0403b3e8&\"\nimport script from \"./student_work.vue?vue&type=script&lang=js&\"\nexport * from \"./student_work.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}