(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-617acdf8"],{5765:function(e,t,a){"use strict";a("629a")},"629a":function(e,t,a){},a5aa:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"admin_comp"}},[a("el-card",{staticStyle:{"margin-bottom":"20px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"26px"}},[e._v("综合查询选项")])]),a("div",[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"searchFormData",attrs:{model:e.searchFormData,"label-width":"80px"}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"竞赛名称",prop:"compName"}},[a("el-input",{model:{value:e.searchFormData.compName,callback:function(t){e.$set(e.searchFormData,"compName",t)},expression:"searchFormData.compName"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"主办单位",prop:"organizer"}},[a("el-input",{model:{value:e.searchFormData.organizer,callback:function(t){e.$set(e.searchFormData,"organizer",t)},expression:"searchFormData.organizer"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"竞赛级别",prop:"level"}},[a("el-select",{attrs:{placeholder:"请选择竞赛级别"},model:{value:e.searchFormData.level,callback:function(t){e.$set(e.searchFormData,"level",t)},expression:"searchFormData.level"}},[a("el-option",{attrs:{label:"国家级",value:"0"}}),a("el-option",{attrs:{label:"省级",value:"1"}}),a("el-option",{attrs:{label:"校级",value:"2"}}),a("el-option",{attrs:{label:"全部",value:""}})],1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"所属学科",prop:"subjectType"}},[a("el-input",{model:{value:e.searchFormData.subjectType,callback:function(t){e.$set(e.searchFormData,"subjectType",t)},expression:"searchFormData.subjectType"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"竞赛地点",prop:"place"}},[a("el-input",{model:{value:e.searchFormData.place,callback:function(t){e.$set(e.searchFormData,"place",t)},expression:"searchFormData.place"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"竞赛状态",prop:"compState"}},[a("el-select",{attrs:{placeholder:"请选择竞赛状态"},model:{value:e.searchFormData.compState,callback:function(t){e.$set(e.searchFormData,"compState",t)},expression:"searchFormData.compState"}},[a("el-option",{attrs:{label:"规划中",value:"0"}}),a("el-option",{attrs:{label:"报名中",value:"1"}}),a("el-option",{attrs:{label:"备赛中",value:"2"}}),a("el-option",{attrs:{label:"已结束",value:"3"}}),a("el-option",{attrs:{label:"备赛中",value:"4"}}),a("el-option",{attrs:{label:"全部",value:""}})],1)],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3,offset:21}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"medium",icon:"el-icon-search"},on:{click:function(t){return e.moreSearch()}}},[e._v("筛选 / 查询")])],1)],1)],1)]),a("el-card",{staticClass:"boxc-ard",staticStyle:{height:"700px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("竞赛列表")]),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"medium",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.addNewComp()}}},[e._v("添加新竞赛\n      ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"elTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),stripe:"",border:"",height:"550px","default-sort":{prop:"date",order:"descending"}},on:{"row-click":e.getDetails}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"#",width:"50px"}}),a("el-table-column",{attrs:{align:"center",prop:"compName",label:"竞赛名称",sortable:""}}),a("el-table-column",{attrs:{align:"center",prop:"organizer",label:"主办单位",sortable:""}}),a("el-table-column",{attrs:{align:"center",prop:"level",label:"级 别",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.level?a("p",[e._v("国家级")]):e._e(),1==t.row.level?a("p",[e._v("省级")]):e._e(),2==t.row.level?a("p",[e._v("校级")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",prop:"subjectType",label:"所属学科"}}),a("el-table-column",{attrs:{align:"center",prop:"occurrenceTime",label:"竞赛时间",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("dataTime")(t.row.occurrenceTime))+"\n        ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"place",label:"竞赛地点"}}),a("el-table-column",{attrs:{align:"center",prop:"竞赛项目",label:"竞赛项目"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){return e.checkProjects(t.row.id)}}},[a("i",{staticClass:"el-icon-view el-icon--right"}),e._v(" 参赛项目列表")])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"compState",label:"状态",sortable:"",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{effect:"dark",type:0===t.row.compState?"info":1===t.row.compState?"primary":2===t.row.compState?"success":3===t.row.compState?"warning":"danger","disable-transitions":""}},[0==t.row.compState?a("span",[e._v("规划中")]):e._e(),1==t.row.compState?a("span",[e._v("报名中")]):e._e(),2==t.row.compState?a("span",[e._v("备赛中")]):e._e(),3==t.row.compState?a("span",[e._v("比赛中")]):e._e(),4==t.row.compState?a("span",[e._v("已结束")]):e._e()])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"left"}},[a("el-link",{attrs:{icon:"el-icon-edit"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("编辑")])],1)],1)]}}])})],1),a("div",{attrs:{id:"fenye"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.tableData.length,"page-size":8,"current-page":e.currentPage},on:{"current-change":e.current_change,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),a("el-dialog",{attrs:{title:"竞赛项目列表",visible:e.projectVisible},on:{"update:visible":function(t){e.projectVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.projectData,stripe:"",border:"","max-height":"500"}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"项目编号",width:"80px"}}),a("el-table-column",{attrs:{align:"center",prop:"projectName",label:"项目名称"}}),a("el-table-column",{attrs:{align:"center",prop:"createByTeacher.college.nickname",label:"所属学院"}}),a("el-table-column",{attrs:{align:"center",prop:"createByTeacher.nickname",label:"指导老师",width:"120px"}}),a("el-table-column",{attrs:{align:"center",prop:"pay",label:"预算"}}),a("el-table-column",{attrs:{align:"center",prop:"applyState",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:1===t.row.applyState?"success":"warning","disable-transitions":""}},[e._v(e._s(1==t.row.applyState?"已审核":"未审核"))])]}}])})],1)],1),a("el-dialog",{attrs:{title:"修改比赛信息",span:8,visible:e.dialogFormVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{"label-position":"right","label-width":"150px",model:e.rowData,rules:e.rules}},[a("el-form-item",{attrs:{label:"竞赛名称",prop:"compName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.rowData.compName,callback:function(t){e.$set(e.rowData,"compName",t)},expression:"rowData.compName"}})],1),a("el-form-item",{attrs:{label:"主办单位",prop:"organizer"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.rowData.organizer,callback:function(t){e.$set(e.rowData,"organizer",t)},expression:"rowData.organizer"}})],1),a("el-form-item",{attrs:{label:"竞赛地点",prop:"place"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.rowData.place,callback:function(t){e.$set(e.rowData,"place",t)},expression:"rowData.place"}})],1),a("el-form-item",{attrs:{label:"所属学科",prop:"subjectType"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.rowData.subjectType,callback:function(t){e.$set(e.rowData,"subjectType",t)},expression:"rowData.subjectType"}})],1),a("el-form-item",{attrs:{label:"最多项目参与数",prop:"maxCountProject"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.rowData.maxCountProject,callback:function(t){e.$set(e.rowData,"maxCountProject",t)},expression:"rowData.maxCountProject"}})],1),a("el-form-item",{attrs:{label:"项目最多参与老师数",prop:"maxCountTeacher"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.rowData.maxCountTeacher,callback:function(t){e.$set(e.rowData,"maxCountTeacher",t)},expression:"rowData.maxCountTeacher"}})],1),a("el-form-item",{attrs:{label:"项目最多参与学生数",prop:"maxCountStudent"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.rowData.maxCountStudent,callback:function(t){e.$set(e.rowData,"maxCountStudent",t)},expression:"rowData.maxCountStudent"}})],1),a("el-form-item",{attrs:{label:"竞赛时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",format:"yyyy 年 MM 月 dd 日"},model:{value:e.rowData.occurrenceTime,callback:function(t){e.$set(e.rowData,"occurrenceTime",t)},expression:"rowData.occurrenceTime"}})],1),a("el-form-item",{attrs:{label:"可申请时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",format:"yyyy 年 MM 月 dd 日"},model:{value:e.rowData.canApplyTime,callback:function(t){e.$set(e.rowData,"canApplyTime",t)},expression:"rowData.canApplyTime"}})],1),a("el-form-item",{attrs:{label:"截止参加时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",format:"yyyy 年 MM 月 dd 日"},model:{value:e.rowData.notApplyTime,callback:function(t){e.$set(e.rowData,"notApplyTime",t)},expression:"rowData.notApplyTime"}})],1),a("el-form-item",{attrs:{label:"竞赛级别"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.rowData.level,callback:function(t){e.$set(e.rowData,"level",t)},expression:"rowData.level"}},[a("el-option",{attrs:{label:"国家级",value:0}}),a("el-option",{attrs:{label:"省级",value:1}}),a("el-option",{attrs:{label:"校级",value:2}})],1)],1),a("el-form-item",{attrs:{label:"竞赛状态"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.rowData.compState,callback:function(t){e.$set(e.rowData,"compState",t)},expression:"rowData.compState"}},[a("el-option",{attrs:{label:"规划中",value:0}}),a("el-option",{attrs:{label:"报名中",value:1}}),a("el-option",{attrs:{label:"备赛中",value:2}}),a("el-option",{attrs:{label:"比赛中",value:3}}),a("el-option",{attrs:{label:"已结束",value:4}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editComp()}}},[e._v("确定修改")])],1)],1)],1)},l=[],o=a("56d7"),n={inject:["reload"],name:"admin_comp",data:function(){return{loading:!0,pagesize:8,currentPage:1,dialogFormVisible:!1,projectVisible:!1,projectData:[],rowIndex:-1,rowData:{},tableData:[],searchFormData:{compName:"",organizer:"",level:"",subjectType:"",place:"",compState:""},rules:{compName:[{required:!0,message:"请输入竞赛名称",trigger:"blur"}],organizer:[{required:!0,message:"请输入主办单位",trigger:"blur"}],place:[{required:!0,message:"请输入竞赛地点",trigger:"blur"}],subjectType:[{required:!0,message:"请输入所属学科",trigger:"blur"}],occurrenceTime:[{required:!0,message:"请输选择竞赛时间",trigger:"blur"}],level:[{required:!0,message:"请输选择竞赛级别",trigger:"blur"}],maxCountProject:[{required:!0,message:"项目最大数不能为空，未要求可填写成999",trigger:"blur"},{type:"number",message:"项目最大数必须为数字值",trigger:"blur"}],maxCountTeacher:[{required:!0,message:"项目中老师最大数不能为空，未要求可填写成999",trigger:"blur"},{type:"number",message:"项目中老师最大数必须为数字值",trigger:"blur"}],maxCountStudent:[{required:!0,message:"项目中学生最大数不能为空，未要求可填写成999",trigger:"blur"},{type:"number",message:"项目中老师最大数必须为数字值",trigger:"blur"}]}}},mounted:function(){var e=this;e.loading=!0,this.$axios.post(o["default"]+"/comp/getAllComps").then((function(t){e.tableData=t.data,e.loading=!1})).catch((function(t){e.loading=!1}))},methods:{moreSearch:function(){var e=this,t=new FormData;t.append("compName",e.searchFormData.compName),t.append("organizer",e.searchFormData.organizer),t.append("level",e.searchFormData.level),t.append("subjectType",e.searchFormData.subjectType),t.append("place",e.searchFormData.place),t.append("compState",e.searchFormData.compState),this.$axios.post(o["default"]+"/comp/moreSearch",t).then((function(t){e.tableData=t.data})).catch((function(t){e.$message.error("系统错误，操作失败，请稍后再试!")}))},getDetails:function(e){this.rowData=JSON.parse(JSON.stringify(e))},editComp:function(){var e=this,t=this,a=new FormData;a.append("id",t.rowData.id),a.append("compName",t.rowData.compName),a.append("organizer",t.rowData.organizer),a.append("level",t.rowData.level),a.append("subjectType",t.rowData.subjectType),a.append("occurrenceTime",t.rowData.occurrenceTime),a.append("occurrenceTime",t.rowData.canApplyTime),a.append("canApplyTime",t.rowData.occurrenceTime),a.append("notApplyTime",t.rowData.notApplyTime),a.append("maxCountTeacher",t.rowData.maxCountTeacher),a.append("maxCountProject",t.rowData.maxCountProject),a.append("place",t.rowData.place),a.append("compState",t.rowData.compState),this.$confirm("确认修改？").then((function(r){e.$axios.post(o["default"]+"/comp/addComp",a).then((function(e){t.$set(t.tableData,t.rowData.id-1,t.rowData),t.$message({message:"修改成功！",type:"success"}),t.dialogFormVisible=!1,t.reload()})).catch((function(e){t.$message.error(e)})),done()})).catch((function(e){}))},checkProjects:function(e){var t=this;t.projectVisible=!0,this.$axios.get(o["default"]+"/comp/getProjectLists/"+e).then((function(e){t.projectData=e.data})).catch((function(e){}))},addNewComp:function(){this.$router.push("/admin/comp/add")},current_change:function(e){this.currentPage=e},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))}},computed:{},filters:{dataTime:function(e){if(void 0==e)return"-";if(e=new Date(e),e instanceof Date){var t=e,a=t.getFullYear(),r=t.getMonth()+1,l=t.getDate()<10?"0"+t.getDate():t.getDate(),o=a+"年"+r+"月 "+l+"日";return o}return"-"}}},c=n,i=(a("5765"),a("2877")),s=Object(i["a"])(c,r,l,!1,null,null,null);t["default"]=s.exports}}]);
//# sourceMappingURL=chunk-617acdf8.07fce319.js.map