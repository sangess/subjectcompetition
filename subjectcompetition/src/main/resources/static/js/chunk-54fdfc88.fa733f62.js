(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54fdfc88"],{"02c1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"teacher_home"}},[a("el-card",[a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"我的竞赛",name:"myComp"}},[a("el-table",{attrs:{data:e.myProjects}},[a("el-table-column",{attrs:{align:"center",label:"竞赛编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.comp.id)+"\n              ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"竞赛名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.comp.compName)+"\n              ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"竞赛等级"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.comp.level?a("p",[e._v("国家级")]):e._e(),1==t.row.comp.level?a("p",[e._v("省级")]):e._e(),2==t.row.comp.level?a("p",[e._v("校级")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"竞赛时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("dataTime")(t.row.comp.occurrenceTime))+"\n              ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"带队老师",prop:"createByTeacher.nickname"}}),a("el-table-column",{attrs:{align:"center",label:"竞赛状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{effect:"dark",type:0===t.row.comp.compState?"info":1===t.row.comp.compState?"primary":2===t.row.comp.compState?"success":3===t.row.comp.compState?"warning":"danger","disable-transitions":""}},[0==t.row.comp.compState?a("span",[e._v("规划中")]):e._e(),1==t.row.comp.compState?a("span",[e._v("报名中")]):e._e(),2==t.row.comp.compState?a("span",[e._v("备赛中")]):e._e(),3==t.row.comp.compState?a("span",[e._v("比赛中")]):e._e(),4==t.row.comp.compState?a("span",[e._v("已结束")]):e._e()])]}}])}),a("el-table-column",{attrs:{align:"center",label:"项目信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{underline:!1},on:{click:function(a){return e.checkMyTeam(t.row)}}},[a("i",{staticClass:"el-icon-view el-icon--right"},[e._v("查看")])])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popconfirm",{attrs:{title:"确定退出项目？"},on:{confirm:function(a){return e.exitProject(t.row.id)}}},[a("el-button",{attrs:{slot:"reference",type:"danger",size:"small"},slot:"reference"},[e._v("退出项目组")])],1)]}}])})],1),a("el-dialog",{attrs:{title:"项目成员",visible:e.projectPersonInfo},on:{"update:visible":function(t){e.projectPersonInfo=t}}},[a("el-table",{attrs:{data:e.projectJoinTeacher}},[a("el-table-column",{attrs:{property:"nickname",label:"教师姓名"}}),a("el-table-column",{attrs:{property:"username",label:"用户名"}}),a("el-table-column",{attrs:{property:"college.nickname",label:"所属院系"}}),a("el-table-column",{attrs:{label:"身份"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.createProjectTeacherId?a("span",[a("el-tag",{attrs:{type:"success"}},[e._v("带队老师")])],1):e._e(),t.row.id!=e.createProjectTeacherId?a("span",[a("el-tag",{attrs:{type:"Primary "}},[e._v("指导老师")])],1):e._e()]}}])})],1),a("el-table",{attrs:{data:e.projectJoinStudent}},[a("el-table-column",{attrs:{property:"nickname",label:"学生姓名"}}),a("el-table-column",{attrs:{property:"username",label:"学号"}}),a("el-table-column",{attrs:{property:"college.nickname",label:"所属院系"}}),a("el-table-column",{attrs:{label:"身份"}},[a("el-tag",{attrs:{type:"Primary "}},[e._v("参赛学员")])],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"个人信息管理",name:"userInfo"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("姓名："+e._s(this.$store.state.nickname))]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("修改资料")])],1),a("div",{staticClass:"text item"},[a("p",[e._v("账号名："+e._s(this.$store.state.username))]),a("p",[e._v("姓名："+e._s(this.$store.state.nickname))]),a("p",[e._v("账户类型："+e._s("admin"==this.$store.state.token?"学校管理员":"college"==this.$store.state.token?"学院":"teacher"==this.$store.state.token?"老师":"学生"))])])]),a("el-dialog",{attrs:{title:"个人信息修改",visible:e.dialogFormVisible,"before-close":e.handleClose,width:e.dialogWidth},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"checkUser",attrs:{model:e.checkUser,"status-icon":"",rules:e.rules,"label-position":e.labelPosition,"label-width":e.labelWidth}},[a("el-form-item",{attrs:{label:"昵称（姓名）",prop:"nickname"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.checkUser.nickname,callback:function(t){e.$set(e.checkUser,"nickname",t)},expression:"checkUser.nickname"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.checkUser.password,callback:function(t){e.$set(e.checkUser,"password",t)},expression:"checkUser.password"}})],1),a("el-form-item",{attrs:{label:"重新输入密码",prop:"rePassword"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.checkUser.rePassword,callback:function(t){e.$set(e.checkUser,"rePassword",t)},expression:"checkUser.rePassword"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitChange("checkUser")}}},[e._v("确定修改")])],1)],1)],1)],1)],1)])],1)},o=[],n=(a("2f14"),a("56d7")),s={inject:["reload"],name:"teacher_home",data:function(){var e=this,t=function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.checkUser.rePassword&&e.$refs.checkUser.validateField("rePassword"),r())},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.checkUser.password?r(new Error("两次输入密码不一致!")):r()};return{userData:{},checkUser:{nickname:"",password:"",rePassword:""},myProjects:[],showTable:!0,createProjectTeacherId:"",dialogFormVisible:!1,projectPersonInfo:!1,projectJoinTeacher:[],projectJoinStudent:[],activeName:"myComp",labelPosition:"right",dialogWidth:"700px",labelWidth:"120px",rules:{password:[{validator:t,trigger:"blur"}],rePassword:[{validator:a,trigger:"blur"}],nickname:[{required:!0,message:"昵称（姓名）不可为空",trigger:"blur"}]}}},mounted:function(){this.showMyComps(),this.getUserData()},methods:{handleClick:function(e,t){},getUserData:function(){var e=this,t=e.$store.state.id;this.$axios.get(n["default"]+"/student/getStudentInfoById/"+t).then((function(t){e.userData=t.data,e.$set(e.userData,"token",e.$store.state.token),e.$set(e.userData,"password",""),e.checkUser.nickname=e.userData.nickname})).catch((function(t){e.$message.error("服务器错误，操作失败！")}))},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},submitUserInto:function(){var e=this,t=new FormData;t.append("nickname",e.checkUser.nickname),t.append("id",e.userData.id),t.append("password",e.checkUser.password),e.$axios.post(n["default"]+"/student/updateStudent",t).then((function(t){e.dialogFormVisible=!1,e.checkUser.password="",e.checkUser.rePassword="",e.$store.commit("setNickname",t.data.data.nickname),e.userData.nickname=t.data.data.nickname,e.$message({message:t.data.message,type:200==t.data.code?"success":"warning"}),e.reload()}))},submitChange:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message({message:"提交失败！",type:"warning"}),!1;t.submitUserInto(),t.reload()}))},resetForm:function(e){this.$refs[e].resetFields()},checkMyTeam:function(e){var t=e.id;this.createProjectTeacherId=e.createByTeacher.id,this.projectPersonInfo=!0,this.getProjectJoinTeacher(t),this.getProjectJoinStudent(t)},getProjectJoinTeacher:function(e){var t=this;t.$axios.get(n["default"]+"/project/getProjectJoinTeacher/"+e).then((function(e){t.projectJoinTeacher=e.data}))},getProjectJoinStudent:function(e){var t=this;t.$axios.get(n["default"]+"/project/getProjectJoinStudent/"+e).then((function(e){t.projectJoinStudent=e.data}))},showMyComps:function(){var e=this,t=e.$store.state.id;e.$axios.get(n["default"]+"/project/getStudentProjects/"+t).then((function(t){e.myProjects=t.data}))},exitProject:function(e){var t=this,a=t.$store.state.id;t.$axios.get(n["default"]+"/student/exitProject/"+a+"/"+e).then((function(e){t.$message({message:e.data.message,type:200==e.data.code?"success":"error"}),t.reload()}))}},filters:{dataTime:function(e){if(void 0==e)return"-";if(e=new Date(e),e instanceof Date){var t=e,a=t.getFullYear(),r=t.getMonth()+1,o=t.getDate()<10?"0"+t.getDate():t.getDate(),n=a+"年"+r+"月 "+o+"日";return n}return"-"}}},c=s,l=(a("be29"),a("2877")),i=Object(l["a"])(c,r,o,!1,null,null,null);t["default"]=i.exports},b858:function(e,t,a){},be29:function(e,t,a){"use strict";a("b858")}}]);
//# sourceMappingURL=chunk-54fdfc88.fa733f62.js.map