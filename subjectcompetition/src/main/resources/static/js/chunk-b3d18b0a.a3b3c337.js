(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b3d18b0a"],{6905:function(e,t,a){},8010:function(e,t,a){"use strict";a("6905")},"9ea4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"college_project"}},[a("el-card",{staticStyle:{"margin-bottom":"20px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("span",{staticStyle:{"font-size":"26px"}},[e._v("项目列表")])]),a("el-col",{attrs:{span:16}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(t){e.导出为Excel()}}},[e._v("导出为Excel")])],1)],1)],1),a("div",[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"searchProjects",attrs:{model:e.searchProjects,"label-width":"80px"}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[a("el-input",{model:{value:e.searchProjects.projectName,callback:function(t){e.$set(e.searchProjects,"projectName",t)},expression:"searchProjects.projectName"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"所属竞赛",prop:"suoshujingsai"}},[a("el-select",{attrs:{placeholder:"所属竞赛"},model:{value:e.searchProjects.compId,callback:function(t){e.$set(e.searchProjects,"compId",t)},expression:"searchProjects.compId"}},[e._l(e.allComp,(function(e){return a("el-option",{key:e.id,attrs:{label:e.compName,value:e.id}})})),a("el-option",{attrs:{label:"全部",value:""}})],2)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"审核状态",prop:"zhuangtai"}},[a("el-select",{attrs:{placeholder:"请选择项目状态"},model:{value:e.searchProjects.applyState,callback:function(t){e.$set(e.searchProjects,"applyState",t)},expression:"searchProjects.applyState"}},[a("el-option",{attrs:{label:"未审核",value:"0"}}),a("el-option",{attrs:{label:"审核通过",value:"1"}}),a("el-option",{attrs:{label:"审核驳回",value:"2"}}),a("el-option",{attrs:{label:"全部",value:""}})],1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"medium",icon:"el-icon-search"},on:{click:function(t){return e.findProjectInCollege()}}},[e._v("筛选 / 查询")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"medium",icon:"el-icon-search"},on:{click:function(t){return e.checkAll()}}},[e._v("查看全部")])],1)],1)],1)],1),a("div",[a("el-table",{staticClass:"elTable",staticStyle:{width:"100%"},attrs:{id:"竞赛项目列表",data:e.projectData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),stripe:"",border:"",height:"560px","default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{align:"center",label:"项目编号",width:"80px",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.$index+1)+"\n          ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"项目名称",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",size:"mini",content:"点击查看项目信息",placement:"top-end"}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showProjectInfo(t.row.project.id)}}},[e._v(e._s(t.row.project.projectName))])],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"project.comp.compName",label:"所属竞赛",sortable:""}}),a("el-table-column",{attrs:{align:"center",prop:"project.comp.compState",label:"所属竞赛状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{effect:"dark",type:0===t.row.project.comp.compState?"info":1===t.row.project.comp.compState?"primary":2===t.row.project.comp.compState?"success":3===t.row.project.comp.compState?"warning":"danger","disable-transitions":""}},[0==t.row.project.comp.compState?a("span",[e._v("规划中")]):e._e(),1==t.row.project.comp.compState?a("span",[e._v("报名中")]):e._e(),2==t.row.project.comp.compState?a("span",[e._v("备赛中")]):e._e(),3==t.row.project.comp.compState?a("span",[e._v("比赛中")]):e._e(),4==t.row.project.comp.compState?a("span",[e._v("已结束")]):e._e()])]}}])}),a("el-table-column",{attrs:{align:"center",label:"指导老师",width:"120px",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.project.createByTeacher.nickname))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"project.pay",label:"预算",sortable:""}}),a("el-table-column",{attrs:{align:"center",prop:"project.applyState",label:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.project.applyState?a("el-tag",{attrs:{type:"danger","disable-transitions":""}},[e._v("审核未通过")]):e._e(),1==t.row.project.applyState?a("el-tag",{attrs:{type:1===t.row.project.applyState?"success":"warning","disable-transitions":""}},[e._v("审核已通过")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"115px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.project.createByTeacher.id==e.teacherId?a("el-button",{attrs:{size:"mini",type:"primary",disabled:""}},[e._v("领队项目")]):e._e(),t.row.project.createByTeacher.id!=e.teacherId?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.teacherApplyJoinProject(t.row.id)}}},[e._v("申请加入")]):e._e()]}}])})],1),a("div",{attrs:{id:"fenye"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.projectData.length,"page-size":12,"current-page":e.currentPage},on:{"current-change":e.current_change,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)]),a("el-dialog",{attrs:{title:"项目成员",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.studentData}},[a("el-table-column",{attrs:{property:"id",label:"#",width:"50"}}),a("el-table-column",{attrs:{property:"studentNumber",label:"学号"}}),a("el-table-column",{attrs:{property:"name",label:"姓名"}}),a("el-table-column",{attrs:{property:"sex",label:"性别"}}),a("el-table-column",{attrs:{property:"age",label:"年龄"}}),a("el-table-column",{attrs:{property:"zhuanye",label:"所学专业"}})],1)],1),a("el-dialog",{attrs:{title:"项目信息",visible:e.projectVisible,width:"70%"},on:{"update:visible":function(t){e.projectVisible=t}}},[a("el-table",{attrs:{stripe:"",border:"",data:e.projectInfo}},[a("el-table-column",{attrs:{align:"center",label:"项目编号",prop:"id"}}),a("el-table-column",{attrs:{align:"center",prop:"projectName",label:"项目名称"}}),a("el-table-column",{attrs:{align:"center",prop:"comp.compName",label:"所属竞赛"}}),a("el-table-column",{attrs:{align:"center",label:"参与学生人数"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.countStudent<t.row.comp.maxCountStudent?a("span",[e._v(e._s(t.row.countStudent)+"人")]):e._e(),t.row.countStudent>=t.row.comp.maxCountStudent?a("span",[e._v(e._s(t.row.countStudent)+"人(满员)")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"参与教师人数"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.countTeacher<t.row.comp.maxCountTeacher?a("span",[e._v(e._s(t.row.countTeacher)+"人")]):e._e(),t.row.countTeacher>=t.row.comp.maxCountTeacher?a("span",[e._v(e._s(t.row.countTeacher)+"人(满员)")]):e._e()]}}])}),a("el-table-column",{attrs:{align:"center",prop:"createByTeacher.nickname",label:"指导老师"}}),a("el-table-column",{attrs:{align:"center",prop:"createByTeacher.username",label:"指导老师用户名"}}),a("el-table-column",{attrs:{align:"center",label:"预算"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pay)+"元")])]}}])})],1)],1)],1)},o=[],l=a("56d7"),c=a("2f14"),n={inject:["reload"],name:"college_project",data:function(){return{allComp:[],teacherId:"",projectVisible:!1,dialogTableVisible:!1,pagesize:12,currentPage:1,projectInfo:[],studentData:[],projectData:[],searchProjects:{projectName:"",compId:"",applyState:""}}},mounted:function(){this.getAllComp(),this.teacherId=this.$store.state.id,this.getProjectData()},methods:{getAllComp:function(){var e=this;e.$axios.post(l["default"]+"/comp/getAllComps").then((function(t){e.allComp=t.data}))},getProjectData:function(){var e=this;this.$axios.get(l["default"]+"/teacher/getProjectByCollegeWithTeacher/"+e.teacherId).then((function(t){e.projectData=t.data})).catch((function(e){console.error(e)}))},checkAll:function(){var e=this;e.reload()},findProjectInCollege:function(){var e=this,t=new FormData;t.append("projectName",e.searchProjects.projectName),t.append("comp.id",e.searchProjects.compId),t.append("applyState",e.searchProjects.applyState),t.append("teacherId",e.teacherId),this.$axios.post(l["default"]+"/project/getMoreSearchProjectByTeacher",t).then((function(t){e.projectData=t.data})).catch((function(t){e.$message.error("系统错误，操作失败，请稍后再试!")}))},"人员查看":function(e){var t=this;this.$axios.get("http://localhost:8088/school/selectStudentByProId?projectId=".concat(e.id)).then((function(e){null==e.data?t.$message.error("系统错误，操作失败，请稍后再试!"):(t.studentData=e.data,t.dialogTableVisible=!0)})).catch((function(e){t.$message.error("系统错误，操作失败，请稍后再试!")}))},"导出为Excel":function(){var e=this.$store.state.nickname+"竞赛项目";Object(c["a"])("竞赛项目列表",e)},showProjectInfo:function(e){var t=this;t.projectVisible=!0,t.$axios.get(l["default"]+"/teacher/getProjectById/"+e).then((function(e){var a=[];a.push(e.data),t.projectInfo=a}))},teacherApplyJoinProject:function(e){var t=this;t.$axios.get(l["default"]+"/teacher/teacherApplyJoinProject/"+e+"/"+t.teacherId).then((function(e){t.$message({type:200==e.data.code?"success":"warning",message:e.data.message})}))},current_change:function(e){this.currentPage=e}}},s=n,p=(a("8010"),a("2877")),i=Object(p["a"])(s,r,o,!1,null,null,null);t["default"]=i.exports}}]);
//# sourceMappingURL=chunk-b3d18b0a.a3b3c337.js.map