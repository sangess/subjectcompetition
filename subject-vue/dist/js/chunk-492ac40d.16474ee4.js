(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-492ac40d"],{"0342":function(t,e,a){},7904:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"college_project"}},[a("el-card",{staticStyle:{"margin-bottom":"20px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("span",{staticStyle:{"font-size":"26px"}},[t._v("项目列表")])]),a("el-col",{attrs:{span:16}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(e){t.导出为Excel()}}},[t._v("导出为Excel")])],1)],1)],1),a("div",[a("el-row",{attrs:{gutter:10}},[a("el-form",{ref:"searchProjects",attrs:{model:t.searchProjects,"label-width":"80px"}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[a("el-input",{model:{value:t.searchProjects.projectName,callback:function(e){t.$set(t.searchProjects,"projectName",e)},expression:"searchProjects.projectName"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"所属竞赛",prop:"suoshujingsai"}},[a("el-select",{attrs:{placeholder:"所属竞赛"},model:{value:t.searchProjects.compId,callback:function(e){t.$set(t.searchProjects,"compId",e)},expression:"searchProjects.compId"}},[t._l(t.allComp,(function(t){return a("el-option",{key:t.id,attrs:{label:t.compName,value:t.id}})})),a("el-option",{attrs:{label:"全部",value:""}})],2)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"审核状态",prop:"zhuangtai"}},[a("el-select",{attrs:{placeholder:"请选择项目状态"},model:{value:t.searchProjects.applyState,callback:function(e){t.$set(t.searchProjects,"applyState",e)},expression:"searchProjects.applyState"}},[a("el-option",{attrs:{label:"未审核",value:"0"}}),a("el-option",{attrs:{label:"审核通过",value:"1"}}),a("el-option",{attrs:{label:"审核驳回",value:"2"}}),a("el-option",{attrs:{label:"全部",value:""}})],1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"medium",icon:"el-icon-search"},on:{click:function(e){return t.findProjectInCollege()}}},[t._v("筛选 / 查询")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"medium",icon:"el-icon-search"},on:{click:function(e){return t.checkAll()}}},[t._v("查看全部")])],1)],1)],1)],1),a("div",[a("el-table",{staticClass:"elTable",staticStyle:{width:"100%"},attrs:{id:"竞赛项目列表",data:t.projectData.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),stripe:"",border:"",height:"560px","default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{align:"center",label:"项目编号",width:"80px",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.$index+1)+"\n          ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"项目名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",size:"mini",content:"点击查看项目信息",placement:"top-end"}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.showProjectInfo(e.row.id)}}},[t._v(t._s(e.row.projectName))])],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"comp.compName",label:"所属竞赛",sortable:""}}),a("el-table-column",{attrs:{align:"center",prop:"comp.compState",label:"所属竞赛状态",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{effect:"dark",type:0===e.row.comp.compState?"info":1===e.row.comp.compState?"primary":2===e.row.comp.compState?"success":3===e.row.comp.compState?"warning":"danger","disable-transitions":""}},[0==e.row.comp.compState?a("span",[t._v("规划中")]):t._e(),1==e.row.comp.compState?a("span",[t._v("报名中")]):t._e(),2==e.row.comp.compState?a("span",[t._v("备赛中")]):t._e(),3==e.row.comp.compState?a("span",[t._v("比赛中")]):t._e(),4==e.row.comp.compState?a("span",[t._v("已结束")]):t._e()])]}}])}),a("el-table-column",{attrs:{align:"center",label:"指导老师",width:"120px",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.createByTeacher.nickname))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"pay",label:"预算",sortable:""}}),a("el-table-column",{attrs:{align:"center",prop:"applyState",label:"项目申请状态",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.applyState?a("el-tag",{attrs:{type:"danger","disable-transitions":""}},[t._v("审核未通过")]):t._e(),1==e.row.applyState?a("el-tag",{attrs:{type:1===e.row.applyState?"success":"warning","disable-transitions":""}},[t._v("院系已通过审核")]):t._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"115px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.applyState?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.applyJoinProject(e.row.id)}}},[t._v("申请加入")]):t._e()]}}])})],1),a("div",{attrs:{id:"fenye"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.projectData.length,"page-size":12,"current-page":t.currentPage},on:{"current-change":t.current_change,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1)]),a("el-dialog",{attrs:{title:"项目成员",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.studentData}},[a("el-table-column",{attrs:{property:"id",label:"#",width:"50"}}),a("el-table-column",{attrs:{property:"studentNumber",label:"学号"}}),a("el-table-column",{attrs:{property:"name",label:"姓名"}}),a("el-table-column",{attrs:{property:"sex",label:"性别"}}),a("el-table-column",{attrs:{property:"age",label:"年龄"}}),a("el-table-column",{attrs:{property:"zhuanye",label:"所学专业"}})],1)],1),a("el-dialog",{attrs:{title:"项目信息",visible:t.projectVisible,width:"70%"},on:{"update:visible":function(e){t.projectVisible=e}}},[a("el-table",{attrs:{stripe:"",border:"",data:t.projectInfo}},[a("el-table-column",{attrs:{align:"center",label:"项目编号",prop:"id"}}),a("el-table-column",{attrs:{align:"center",prop:"projectName",label:"项目名称"}}),a("el-table-column",{attrs:{align:"center",prop:"comp.compName",label:"所属竞赛"}}),a("el-table-column",{attrs:{align:"center",label:"参与学生人数"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.countStudent<e.row.comp.maxCountStudent?a("span",[t._v(t._s(e.row.countStudent)+"人")]):t._e(),e.row.countStudent>=e.row.comp.maxCountStudent?a("span",[t._v(t._s(e.row.countStudent)+"人(满员)")]):t._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"参与教师人数"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.countTeacher<e.row.comp.maxCountTeacher?a("span",[t._v(t._s(e.row.countTeacher)+"人")]):t._e(),e.row.countTeacher>=e.row.comp.maxCountTeacher?a("span",[t._v(t._s(e.row.countTeacher)+"人(满员)")]):t._e()]}}])}),a("el-table-column",{attrs:{align:"center",prop:"createByTeacher.nickname",label:"指导老师"}}),a("el-table-column",{attrs:{align:"center",prop:"createByTeacher.username",label:"指导老师用户名"}}),a("el-table-column",{attrs:{align:"center",label:"预算"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pay)+"元")])]}}])})],1)],1)],1)},r=[],l=a("2f14"),n=a("56d7"),c={inject:["reload"],name:"college_project",data:function(){return{studentId:"",allComp:[],pagesize:12,currentPage:1,projectVisible:!1,dialogTableVisible:!1,projectInfo:[],studentData:[],projectData:[],searchProjects:{projectName:"",compId:"",applyState:""}}},mounted:function(){this.studentId=this.$store.state.id,this.getAllComp(),this.getProjectData()},methods:{getAllComp:function(){var t=this;t.$axios.post(n["default"]+"/comp/getAllComps").then((function(e){t.allComp=e.data}))},getProjectData:function(){var t=this,e=t.$store.state.id;this.$axios.get(n["default"]+"/student/getProjectByCollegeWithStudent/"+e).then((function(e){t.projectData=e.data})).catch((function(t){console.error(t)}))},checkAll:function(){var t=this;t.reload()},findProjectInCollege:function(){var t=this,e=new FormData;e.append("projectName",t.searchProjects.projectName),e.append("comp.id",t.searchProjects.compId),e.append("applyState",t.searchProjects.applyState),e.append("studentId",t.studentId),this.$axios.post(n["default"]+"/project/getMoreSearchProjectByStudent",e).then((function(e){t.projectData=e.data})).catch((function(e){t.$message.error("系统错误，操作失败，请稍后再试!")}))},"导出为Excel":function(){var t=this.$store.state.nickname+"竞赛项目";Object(l["a"])("竞赛项目列表",t)},showProjectInfo:function(t){var e=this;e.projectVisible=!0,e.$axios.get(n["default"]+"/teacher/getProjectById/"+t).then((function(t){var a=[];a.push(t.data),e.projectInfo=a}))},applyJoinProject:function(t){var e=this,a=e.$store.state.id;e.$axios.get(n["default"]+"/student/applyJoinProject/"+t+"/"+a).then((function(t){e.$message({type:200==t.data.code?"success":"warning",message:t.data.message})}))},current_change:function(t){this.currentPage=t}}},s=c,p=(a("e8bf"),a("2877")),i=Object(p["a"])(s,o,r,!1,null,null,null);e["default"]=i.exports},e8bf:function(t,e,a){"use strict";a("0342")}}]);
//# sourceMappingURL=chunk-492ac40d.16474ee4.js.map