{"remainingRequest":"E:\\vue-project\\mango\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue-project\\mango\\src\\views\\school\\school_project.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue-project\\mango\\src\\views\\school\\school_project.vue","mtime":1586960721153},{"path":"E:\\vue-project\\mango\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-project\\mango\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue-project\\mango\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-project\\mango\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { exportExcel } from \"../../assets/js/utils.js\";\r\nexport default {\r\n  name: \"school_project\",\r\n  data() {\r\n    return {\r\n      dialogTableVisible: false,\r\n      studentData: [],\r\n      tableData: [],\r\n      searchFormData: {\r\n        name: \"\",\r\n        suoshujingsai: \"\",\r\n        zhidaolaoshi: \"\",\r\n        zhuangtai: \"\",\r\n        suoshuxueyuan: this.$store.state.userinfo.username\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    this.请求项目数据();\r\n  },\r\n  methods: {\r\n    请求项目数据() {\r\n      var that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/relationProAndCompBySN?schoolName=${that.$store.state.userinfo.username}`\r\n        )\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n          console.error(error);\r\n        });\r\n    },\r\n    点击综合查询选项查询按钮() {\r\n      let that = this;\r\n      this.$axios\r\n        .post(\r\n          \"http://localhost:8088/project/relationFuzzySearchProAndComp\",\r\n          that.searchFormData\r\n        )\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n          that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n        });\r\n    },\r\n    查看全部() {\r\n      this.请求项目数据();\r\n      this.searchFormData = {};\r\n    },\r\n    删除审核未通过项目(row) {\r\n      let that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/delVisibleIs0ByProId?projectId=${row.id}`\r\n        )\r\n        .then(function(response) {\r\n          if (response.data == \"error\") {\r\n            that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n          } else {\r\n            that.$message({\r\n              type: \"success\",\r\n              message: response.data\r\n            });\r\n            that.请求项目数据();\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n        });\r\n    },\r\n    人员查看(row) {\r\n      let that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/school/selectStudentByProId?projectId=${row.id}`\r\n        )\r\n        .then(function(response) {\r\n          if (response.data == null) {\r\n            that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n          } else {\r\n            console.log(response.data);\r\n            that.studentData = response.data;\r\n            that.dialogTableVisible = true;\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n        });\r\n    },\r\n    导出为Excel() {\r\n      let excelname = this.$store.state.userinfo.username + \"竞赛项目\";\r\n      exportExcel(\"竞赛项目列表\", excelname);\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["school_project.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"school_project.vue","sourceRoot":"src/views/school","sourcesContent":["<template>\r\n  <div id=\"school_project\">\r\n    <el-card style=\"    margin-bottom: 20px;\">\r\n      <div slot=\"header\">\r\n        <span style=\"font-size: 26px;\">综合查询选项</span>\r\n      </div>\r\n      <div>\r\n        <el-row :gutter=\"10\">\r\n          <el-form ref=\"searchFormData\" :model=\"searchFormData\" label-width=\"80px\">\r\n            <el-col :span=\"4\">\r\n              <el-form-item label=\"项目名称\" prop=\"name\">\r\n                <el-input v-model=\"searchFormData.name\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              <el-form-item label=\"所属竞赛\" prop=\"suoshujingsai\">\r\n                <el-input v-model=\"searchFormData.suoshujingsai\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              <el-form-item label=\"指导老师\" prop=\"zhidaolaoshi\">\r\n                <el-input v-model=\"searchFormData.zhidaolaoshi\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              <el-form-item label=\"状态\" prop=\"zhuangtai\">\r\n                <el-select v-model=\"searchFormData.zhuangtai\" placeholder=\"请选择竞赛级别\">\r\n                  <el-option label=\"已审核\" value=\"已审核\"></el-option>\r\n                  <el-option label=\"待审核\" value=\"待审核\"></el-option>\r\n                  <el-option label value></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"3\">\r\n              <el-button\r\n                type=\"primary\"\r\n                size=\"medium\"\r\n                icon=\"el-icon-search\"\r\n                style=\"float: right;\"\r\n                @click=\"点击综合查询选项查询按钮()\"\r\n              >筛选 / 查询</el-button>\r\n            </el-col>\r\n            <el-col :span=\"2\">\r\n              <el-button\r\n                type=\"primary\"\r\n                size=\"medium\"\r\n                icon=\"el-icon-search\"\r\n                style=\"float: right;\"\r\n                @click=\"查看全部()\"\r\n              >查看全部</el-button>\r\n            </el-col>\r\n          </el-form>\r\n        </el-row>\r\n      </div>\r\n    </el-card>\r\n    <el-card>\r\n      <div slot=\"header\">\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"6\">\r\n            <span style=\"font-size: 26px;\">本学院竞赛项目列表</span>\r\n          </el-col>\r\n          <el-col :span=\"18\">\r\n            <el-button type=\"text\" style=\"float:right;\" @click=\"导出为Excel()\">导出为Excel</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n      <div>\r\n        <el-table\r\n          id=\"竞赛项目列表\"\r\n          class=\"elTable\"\r\n          :data=\"tableData\"\r\n          stripe\r\n          border\r\n          height=\"560px\"\r\n          style=\"width: 100%\"\r\n        >\r\n          <el-table-column align=\"center\" prop=\"id\" label=\"项目ID\" width=\"80px\"></el-table-column>\r\n          <el-table-column align=\"center\" prop=\"name\" label=\"项目名称\"></el-table-column>\r\n          <el-table-column align=\"center\" prop=\"compName\" label=\"所属竞赛\"></el-table-column>\r\n          <el-table-column align=\"center\" prop=\"compZhuangtai\" label=\"所属竞赛状态\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag\r\n                :type=\"scope.row.compZhuangtai === '进行中' ? 'success' : (scope.row.compZhuangtai === '未开始' ? 'primary':'warning')\"\r\n                disable-transitions\r\n              >{{scope.row.compZhuangtai}}</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" prop=\"suoshuxueyuan\" label=\"所属学院\"></el-table-column>\r\n          <el-table-column align=\"center\" prop=\"zhidaolaoshi\" label=\"指导老师\" width=\"120px\"></el-table-column>\r\n          <el-table-column align=\"center\" prop=\"yusuan\" label=\"预算\"></el-table-column>\r\n          <el-table-column align=\"center\" prop=\"zhuangtai\" label=\"状态\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag v-if=\"scope.row.visible == 0\" type=\"danger\" disable-transitions>审核未通过</el-tag>\r\n              <el-tag\r\n                v-if=\"scope.row.visible == 1\"\r\n                :type=\"scope.row.zhuangtai === '已审核' ? 'success' : 'warning'\"\r\n                disable-transitions\r\n              >{{scope.row.zhuangtai}}</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" label=\"操作\" width=\"115px\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                v-if=\"scope.row.visible == 0\"\r\n                size=\"mini\"\r\n                type=\"warning\"\r\n                @click=\"删除审核未通过项目(scope.row)\"\r\n              >删除</el-button>\r\n              <el-button\r\n                v-if=\"scope.row.visible == 1\"\r\n                size=\"mini\"\r\n                type=\"primary\"\r\n                @click=\"人员查看(scope.row)\"\r\n              >人员查看</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 学生列表模态框 -->\r\n    <el-dialog title=\"项目成员\" :visible.sync=\"dialogTableVisible\">\r\n      <el-table :data=\"studentData\">\r\n        <el-table-column property=\"id\" label=\"#\" width=\"50\"></el-table-column>\r\n        <el-table-column property=\"studentNumber\" label=\"学号\"></el-table-column>\r\n        <el-table-column property=\"name\" label=\"姓名\"></el-table-column>\r\n        <el-table-column property=\"sex\" label=\"性别\"></el-table-column>\r\n        <el-table-column property=\"age\" label=\"年龄\"></el-table-column>\r\n        <el-table-column property=\"zhuanye\" label=\"所学专业\"></el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { exportExcel } from \"../../assets/js/utils.js\";\r\nexport default {\r\n  name: \"school_project\",\r\n  data() {\r\n    return {\r\n      dialogTableVisible: false,\r\n      studentData: [],\r\n      tableData: [],\r\n      searchFormData: {\r\n        name: \"\",\r\n        suoshujingsai: \"\",\r\n        zhidaolaoshi: \"\",\r\n        zhuangtai: \"\",\r\n        suoshuxueyuan: this.$store.state.userinfo.username\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    this.请求项目数据();\r\n  },\r\n  methods: {\r\n    请求项目数据() {\r\n      var that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/relationProAndCompBySN?schoolName=${that.$store.state.userinfo.username}`\r\n        )\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n          console.error(error);\r\n        });\r\n    },\r\n    点击综合查询选项查询按钮() {\r\n      let that = this;\r\n      this.$axios\r\n        .post(\r\n          \"http://localhost:8088/project/relationFuzzySearchProAndComp\",\r\n          that.searchFormData\r\n        )\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n          that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n        });\r\n    },\r\n    查看全部() {\r\n      this.请求项目数据();\r\n      this.searchFormData = {};\r\n    },\r\n    删除审核未通过项目(row) {\r\n      let that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/delVisibleIs0ByProId?projectId=${row.id}`\r\n        )\r\n        .then(function(response) {\r\n          if (response.data == \"error\") {\r\n            that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n          } else {\r\n            that.$message({\r\n              type: \"success\",\r\n              message: response.data\r\n            });\r\n            that.请求项目数据();\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n        });\r\n    },\r\n    人员查看(row) {\r\n      let that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/school/selectStudentByProId?projectId=${row.id}`\r\n        )\r\n        .then(function(response) {\r\n          if (response.data == null) {\r\n            that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n          } else {\r\n            console.log(response.data);\r\n            that.studentData = response.data;\r\n            that.dialogTableVisible = true;\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n        });\r\n    },\r\n    导出为Excel() {\r\n      let excelname = this.$store.state.userinfo.username + \"竞赛项目\";\r\n      exportExcel(\"竞赛项目列表\", excelname);\r\n    }\r\n  }\r\n};\r\n</script>"]}]}