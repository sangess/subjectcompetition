{"remainingRequest":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IDEA_workspace2\\subject-vue\\src\\views\\college\\college_apply.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IDEA_workspace2\\subject-vue\\src\\views\\college\\college_apply.vue","mtime":1619205308501},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { formatDate} from \"../../assets/js/utils.js\";\r\nexport default {\r\n  inject:['reload'],\r\n  name:\"college_apply\",\r\n  data(){\r\n    return {\r\n      compOrProject:\"comp\",\r\n      activeApplyComp:\"done\",\r\n      activeApplyProject:\"undo\",\r\n      tabPosition:\"left\",\r\n      undoApplyCompList:[],\r\n      doneApplyCompList:[],\r\n      undoApplyTeacherList:[],\r\n      doneApplyTeacherList:[]\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getUndoApplyCompList();\r\n    this.getDoneApplyCompList();\r\n    this.getUndoApplyTeacherList();\r\n    this.getDoneApplyTeacherList();\r\n  },\r\n  methods:{\r\n    /**\r\n     * 得到未处理的比赛申请\r\n     */\r\n    getUndoApplyCompList(){\r\n      let that=this;\r\n      let collegeId=that.$store.state.id;\r\n      that.$axios\r\n        .post(`http://localhost:8089/college/getUndoCompApply/`+collegeId)\r\n        .then(function (response) {\r\n          console.log(\"已处理的学院与管理员的竞赛关系\")\r\n          console.log(response.data);\r\n          that.undoApplyCompList=response.data;\r\n        })\r\n    },\r\n    /**\r\n     * 得到处理过的比赛申请\r\n     */\r\n    getDoneApplyCompList(){\r\n      let that=this;\r\n      let collegeId=that.$store.state.id;\r\n      that.$axios\r\n      .post(`http://localhost:8089/college/getDoneCompApply/`+collegeId)\r\n      .then(function (response) {\r\n        console.log(\"未处理的学院与管理员的竞赛关系\")\r\n        console.log(response.data)\r\n        that.doneApplyCompList=response.data;\r\n      })\r\n    },\r\n    /**\r\n     * 重新申请\r\n     * @param collegeCompId\r\n     */\r\n    reApplyComp(collegeCompId){\r\n      let that=this;\r\n      that.$axios\r\n        .get(`http://localhost:8089/college/reApplyComp/`+collegeCompId)\r\n        .then(function (response) {\r\n          that.$message({\r\n            message:response.data.message,\r\n            type:response.data.code==200?'success':'error'\r\n          });\r\n          that.reload()\r\n        })\r\n    },\r\n    /**\r\n     * 得到未处理的项目申请\r\n     */\r\n    getUndoApplyTeacherList(){\r\n      let that=this;\r\n      let collegeId=that.$store.state.id;\r\n      that.$axios\r\n      .get(`http://localhost:8089/college/getUndoApplyTeacherList/`+collegeId)\r\n      .then(function (response) {\r\n        console.log(\"未处理的学院与老师的项目关系\")\r\n        console.log(response.data);\r\n        that.undoApplyTeacherList=response.data;\r\n      })\r\n    },\r\n    /**\r\n     * 得到处理过的项目申请\r\n     */\r\n    getDoneApplyTeacherList(){\r\n      let that=this;\r\n      let collegeId=that.$store.state.id;\r\n      that.$axios\r\n      .get(`http://localhost:8089/college/getDoneApplyTeacherList/`+collegeId)\r\n      .then(function (response) {\r\n        console.log(\"已处理的学院与老师的项目关系\")\r\n        console.log(response.data);\r\n        that.doneApplyTeacherList=response.data;\r\n      })\r\n    },\r\n    /**\r\n     * 同意项目申请请求\r\n     */\r\n    applyProject(teacher_projectId){\r\n      let that=this;\r\n      that.$axios\r\n      .get(`http://localhost:8089/college/applyTeacherProject/`+teacher_projectId)\r\n      .then(function (response) {\r\n        that.$message({\r\n          message:response.data.message,\r\n          type:response.data.code==200?'success':'error'\r\n        })\r\n        that.reload()\r\n      })\r\n    },\r\n    /**\r\n     * 拒绝项目申请请求\r\n     */\r\n    refuseProject(teacher_projectId){\r\n      let that=this;\r\n      that.$axios\r\n      .get(`http://localhost:8089/college/refuseTeacherProject/`+teacher_projectId)\r\n      .then(function (response) {\r\n        that.$message({\r\n          message:response.data.message,\r\n          type:response.data.code==200?'success':'error'\r\n        })\r\n        that.reload()\r\n      })\r\n    }\r\n  },\r\n  filters:{\r\n    dataTime: function(value) {\r\n      if (value==undefined)\r\n        return '-';\r\n      value = new Date(value)\r\n      if (value instanceof Date) {\r\n        var d = value;\r\n        var year=d.getFullYear();\r\n        var m = d.getMonth() + 1;\r\n        var day = d.getDate() < 10 ? '0' + d.getDate() : d.getDate();\r\n        var myDate = year + '年'+m + '月 ' + day +'日';\r\n        return myDate;\r\n      } else {\r\n        return \"-\";\r\n      }\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["college_apply.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"college_apply.vue","sourceRoot":"src/views/college","sourcesContent":["<template>\r\n  <div id=\"school_apply\">\r\n    <el-card>\r\n      <div slot=\"header\"></div>\r\n      <div>\r\n        <el-tabs  v-model=\"compOrProject\">\r\n          <el-tab-pane label=\"竞赛申请列表\" name=\"comp\">\r\n            <el-tabs v-model=\"activeApplyComp\" :tab-position=\"tabPosition\">\r\n              <el-tab-pane label=\"未处理\" name=\"undo\">\r\n                <el-table border stripe  :data=\"undoApplyCompList\" style=\"width: 100%;align-items: center\">\r\n                  <el-table-column label=\"#\" >\r\n                    <template slot-scope=\"scope\">{{scope.$index + 1}}</template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"applyDate\" label=\"申请日期\" >\r\n                    <template slot-scope=\"scope\">\r\n                      <i :class=\"scope.row.applyDate==undefined?'':'el-icon-time'\"></i>\r\n                      {{scope.row.applyDate|dataTime }}\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"updateApplyDate\" label=\"最新更改日期\">\r\n                    <template slot-scope=\"scope\">\r\n                      <i :class=\"scope.row.updateApplyDate==undefined?'':'el-icon-time'\"></i>\r\n                      {{scope.row.updateApplyDate|dataTime }}\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"college.nickname\" label=\"申请人\"></el-table-column>\r\n                  <el-table-column prop=\"comp.compName\" label=\"申请竞赛\" ></el-table-column>\r\n                  <el-table-column label=\"目前状态\" >\r\n                    <template slot-scope=\"scope\">\r\n                      <el-tag type=\"success\" >{{scope.row.applyOrJoin==1?'已发出申请':'已重新发出申请'}}</el-tag>\r\n                    </template>\r\n                  </el-table-column>\r\n                </el-table>\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"已处理\" name=\"done\">\r\n                <el-table border stripe  :data=\"doneApplyCompList\" style=\"width: 100%;align-items: center\">\r\n                  <el-table-column label=\"#\" >\r\n                    <template slot-scope=\"scope\">{{scope.$index + 1}}</template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"applyDate\" label=\"申请日期\" >\r\n                    <template slot-scope=\"scope\">\r\n                      <i :class=\"scope.row.applyDate==undefined?'':'el-icon-time'\"></i>\r\n                      {{scope.row.applyDate|dataTime }}\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"updateApplyDate\" label=\"最新更改日期\">\r\n                    <template slot-scope=\"scope\">\r\n                      <i :class=\"scope.row.updateApplyDate==undefined?'':'el-icon-time'\"></i>\r\n                      {{scope.row.updateApplyDate|dataTime }}\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"college.nickname\" label=\"申请人\"></el-table-column>\r\n                  <el-table-column prop=\"comp.compName\" label=\"申请竞赛\" ></el-table-column>\r\n                  <el-table-column prop=\"applyOrJoin\" label=\"处理结果\" >\r\n                    <template slot-scope=\"scope\">\r\n                      <el-tag :type=\"scope.row.applyOrJoin==3?'success':'danger'\">\r\n                        <span v-text=\"scope.row.applyOrJoin==3?'同意申请':'申请驳回'\"></span>\r\n                      </el-tag>\r\n                      <el-tooltip v-if=\"scope.row.applyOrJoin==2\" style=\"margin-left: 50px\" class=\"item\" effect=\"dark\" content=\"重新申请\" placement=\"right\">\r\n                        <el-button type=\"primary\" icon=\"el-icon-refresh-right\"  circle @click=\"reApplyComp(scope.row.id)\"></el-button>\r\n                      </el-tooltip>\r\n                    </template>\r\n                  </el-table-column>\r\n                </el-table>\r\n              </el-tab-pane>\r\n            </el-tabs>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"项目申请列表\" name=\"project\">\r\n            <el-tabs v-model=\"activeApplyProject\" :tab-position=\"tabPosition\">\r\n              <el-tab-pane label=\"未处理\" name=\"undo\">\r\n                <el-table border stripe  :data=\"undoApplyTeacherList\" style=\"width: 100%;align-items: center\">\r\n                  <el-table-column label=\"#\" >\r\n                    <template slot-scope=\"scope\">{{scope.$index + 1}}</template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"applyDate\" label=\"申请日期\" >\r\n                    <template slot-scope=\"scope\">\r\n                      <i :class=\"scope.row.applyDate==undefined?'':'el-icon-time'\"></i>\r\n                      {{scope.row.applyDate|dataTime }}\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"updateApplyDate\" label=\"最新更改日期\">\r\n                    <template slot-scope=\"scope\">\r\n                      <i :class=\"scope.row.updateApplyDate==undefined?'':'el-icon-time'\"></i>\r\n                      {{scope.row.updateApplyDate|dataTime }}\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"teacher.nickname\" label=\"申请人\"></el-table-column>\r\n                  <el-table-column prop=\"project.comp.compName\" label=\"申请竞赛\" ></el-table-column>\r\n                  <el-table-column label=\"目前状态\" >\r\n                    <template slot-scope=\"scope\">\r\n                      <el-tag type=\"success\" >{{scope.row.applyOrJoin==1?'发出申请':'重新发出申请'}}</el-tag>\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column label=\"操作\" >\r\n                    <template slot-scope=\"scope\">\r\n                      <el-tooltip class=\"item\" effect=\"dark\" content=\"同意申请\" placement=\"top\">\r\n                        <el-button type=\"primary\" icon=\"el-icon-circle-check\"  circle @click=\"applyProject(scope.row.id)\"></el-button>\r\n                      </el-tooltip>\r\n                      <el-tooltip class=\"item\" effect=\"dark\" content=\"驳回申请\" placement=\"top\">\r\n                        <el-button type=\"warning\" icon=\"el-icon-circle-close\"  circle @click=\"refuseProject(scope.row.id)\"></el-button>\r\n                      </el-tooltip>\r\n                    </template>\r\n                  </el-table-column>\r\n                </el-table>\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"已处理\" name=\"done\">\r\n                <el-table border stripe  :data=\"doneApplyTeacherList\" style=\"width: 100%;align-items: center\">\r\n                  <el-table-column label=\"#\" >\r\n                    <template slot-scope=\"scope\">{{scope.$index + 1}}</template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"applyDate\" label=\"申请日期\" >\r\n                    <template slot-scope=\"scope\">\r\n                      <i :class=\"scope.row.applyDate==undefined?'':'el-icon-time'\"></i>\r\n                      {{scope.row.applyDate|dataTime }}\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"updateApplyDate\" label=\"最新更改日期\">\r\n                    <template slot-scope=\"scope\">\r\n                      <i :class=\"scope.row.updateApplyDate==undefined?'':'el-icon-time'\"></i>\r\n                      {{scope.row.updateApplyDate|dataTime }}\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"teacher.nickname\" label=\"申请人\"></el-table-column>\r\n                  <el-table-column prop=\"project.comp.compName\" label=\"申请竞赛\" ></el-table-column>\r\n                  <el-table-column prop=\"applyOrJoin\" label=\"处理情况\" >\r\n                    <template slot-scope=\"scope\">\r\n                      <el-tag :type=\"scope.row.applyOrJoin==3?'success':'danger'\">\r\n                        <span v-text=\"scope.row.applyOrJoin==3?'同意申请':'申请驳回'\"></span>\r\n                      </el-tag>\r\n                    </template>\r\n                  </el-table-column>\r\n                </el-table>\r\n              </el-tab-pane>\r\n            </el-tabs>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { formatDate} from \"../../assets/js/utils.js\";\r\nexport default {\r\n  inject:['reload'],\r\n  name:\"college_apply\",\r\n  data(){\r\n    return {\r\n      compOrProject:\"comp\",\r\n      activeApplyComp:\"done\",\r\n      activeApplyProject:\"undo\",\r\n      tabPosition:\"left\",\r\n      undoApplyCompList:[],\r\n      doneApplyCompList:[],\r\n      undoApplyTeacherList:[],\r\n      doneApplyTeacherList:[]\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getUndoApplyCompList();\r\n    this.getDoneApplyCompList();\r\n    this.getUndoApplyTeacherList();\r\n    this.getDoneApplyTeacherList();\r\n  },\r\n  methods:{\r\n    /**\r\n     * 得到未处理的比赛申请\r\n     */\r\n    getUndoApplyCompList(){\r\n      let that=this;\r\n      let collegeId=that.$store.state.id;\r\n      that.$axios\r\n        .post(`http://localhost:8089/college/getUndoCompApply/`+collegeId)\r\n        .then(function (response) {\r\n          console.log(\"已处理的学院与管理员的竞赛关系\")\r\n          console.log(response.data);\r\n          that.undoApplyCompList=response.data;\r\n        })\r\n    },\r\n    /**\r\n     * 得到处理过的比赛申请\r\n     */\r\n    getDoneApplyCompList(){\r\n      let that=this;\r\n      let collegeId=that.$store.state.id;\r\n      that.$axios\r\n      .post(`http://localhost:8089/college/getDoneCompApply/`+collegeId)\r\n      .then(function (response) {\r\n        console.log(\"未处理的学院与管理员的竞赛关系\")\r\n        console.log(response.data)\r\n        that.doneApplyCompList=response.data;\r\n      })\r\n    },\r\n    /**\r\n     * 重新申请\r\n     * @param collegeCompId\r\n     */\r\n    reApplyComp(collegeCompId){\r\n      let that=this;\r\n      that.$axios\r\n        .get(`http://localhost:8089/college/reApplyComp/`+collegeCompId)\r\n        .then(function (response) {\r\n          that.$message({\r\n            message:response.data.message,\r\n            type:response.data.code==200?'success':'error'\r\n          });\r\n          that.reload()\r\n        })\r\n    },\r\n    /**\r\n     * 得到未处理的项目申请\r\n     */\r\n    getUndoApplyTeacherList(){\r\n      let that=this;\r\n      let collegeId=that.$store.state.id;\r\n      that.$axios\r\n      .get(`http://localhost:8089/college/getUndoApplyTeacherList/`+collegeId)\r\n      .then(function (response) {\r\n        console.log(\"未处理的学院与老师的项目关系\")\r\n        console.log(response.data);\r\n        that.undoApplyTeacherList=response.data;\r\n      })\r\n    },\r\n    /**\r\n     * 得到处理过的项目申请\r\n     */\r\n    getDoneApplyTeacherList(){\r\n      let that=this;\r\n      let collegeId=that.$store.state.id;\r\n      that.$axios\r\n      .get(`http://localhost:8089/college/getDoneApplyTeacherList/`+collegeId)\r\n      .then(function (response) {\r\n        console.log(\"已处理的学院与老师的项目关系\")\r\n        console.log(response.data);\r\n        that.doneApplyTeacherList=response.data;\r\n      })\r\n    },\r\n    /**\r\n     * 同意项目申请请求\r\n     */\r\n    applyProject(teacher_projectId){\r\n      let that=this;\r\n      that.$axios\r\n      .get(`http://localhost:8089/college/applyTeacherProject/`+teacher_projectId)\r\n      .then(function (response) {\r\n        that.$message({\r\n          message:response.data.message,\r\n          type:response.data.code==200?'success':'error'\r\n        })\r\n        that.reload()\r\n      })\r\n    },\r\n    /**\r\n     * 拒绝项目申请请求\r\n     */\r\n    refuseProject(teacher_projectId){\r\n      let that=this;\r\n      that.$axios\r\n      .get(`http://localhost:8089/college/refuseTeacherProject/`+teacher_projectId)\r\n      .then(function (response) {\r\n        that.$message({\r\n          message:response.data.message,\r\n          type:response.data.code==200?'success':'error'\r\n        })\r\n        that.reload()\r\n      })\r\n    }\r\n  },\r\n  filters:{\r\n    dataTime: function(value) {\r\n      if (value==undefined)\r\n        return '-';\r\n      value = new Date(value)\r\n      if (value instanceof Date) {\r\n        var d = value;\r\n        var year=d.getFullYear();\r\n        var m = d.getMonth() + 1;\r\n        var day = d.getDate() < 10 ? '0' + d.getDate() : d.getDate();\r\n        var myDate = year + '年'+m + '月 ' + day +'日';\r\n        return myDate;\r\n      } else {\r\n        return \"-\";\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>"]}]}