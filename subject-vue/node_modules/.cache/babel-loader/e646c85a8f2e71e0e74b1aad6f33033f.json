{"remainingRequest":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\thread-loader\\dist\\cjs.js!D:\\IDEA_workspace2\\subject-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\IDEA_workspace2\\subject-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IDEA_workspace2\\subject-vue\\src\\views\\teacher\\teacher_project.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IDEA_workspace2\\subject-vue\\src\\views\\teacher\\teacher_project.vue","mtime":1621104297568},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport api from \"../../main.js\";\nimport { exportExcel } from \"../../assets/js/utils.js\";\nexport default {\n  inject: ['reload'],\n  name: \"college_project\",\n  data: function data() {\n    return {\n      allComp: [],\n      teacherId: \"\",\n      projectVisible: false,\n      dialogTableVisible: false,\n      pagesize: 12,\n      currentPage: 1,\n      projectInfo: [],\n      studentData: [],\n      projectData: [],\n      searchProjects: {\n        projectName: \"\",\n        compId: \"\",\n        applyState: \"\"\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.getAllComp();\n    this.teacherId = this.$store.state.id;\n    this.getProjectData();\n  },\n  methods: {\n    getAllComp: function getAllComp() {\n      var that = this;\n      that.$axios.post(api + \"/comp/getAllComps\").then(function (response) {\n        that.allComp = response.data;\n      });\n    },\n\n    /**\n     * 得到院系所有的项目\n     */\n    getProjectData: function getProjectData() {\n      var that = this;\n      this.$axios.get(api + \"/teacher/getProjectByCollegeWithTeacher/\" + that.teacherId).then(function (response) {\n        that.projectData = response.data;\n      }).catch(function (error) {\n        console.error(error);\n      });\n    },\n    checkAll: function checkAll() {\n      var that = this;\n      that.reload();\n    },\n    findProjectInCollege: function findProjectInCollege() {\n      var that = this;\n      var searchForm = new FormData();\n      searchForm.append(\"projectName\", that.searchProjects.projectName);\n      searchForm.append(\"comp.id\", that.searchProjects.compId);\n      searchForm.append(\"applyState\", that.searchProjects.applyState);\n      searchForm.append(\"teacherId\", that.teacherId);\n      this.$axios.post(api + \"/project/getMoreSearchProjectByTeacher\", searchForm).then(function (response) {\n        that.projectData = response.data;\n      }).catch(function (error) {\n        that.$message.error(\"系统错误，操作失败，请稍后再试!\");\n      });\n    },\n    人员查看: function 人员查看(row) {\n      var that = this;\n      this.$axios.get(\"http://localhost:8088/school/selectStudentByProId?projectId=\".concat(row.id)).then(function (response) {\n        if (response.data == null) {\n          that.$message.error(\"系统错误，操作失败，请稍后再试!\");\n        } else {\n          that.studentData = response.data;\n          that.dialogTableVisible = true;\n        }\n      }).catch(function (error) {\n        that.$message.error(\"系统错误，操作失败，请稍后再试!\");\n      });\n    },\n    导出为Excel: function 导出为Excel() {\n      var excelname = this.$store.state.nickname + \"竞赛项目\";\n      exportExcel(\"竞赛项目列表\", excelname);\n    },\n    showProjectInfo: function showProjectInfo(projectId) {\n      var that = this;\n      that.projectVisible = true;\n      that.$axios.get(api + \"/teacher/getProjectById/\" + projectId).then(function (response) {\n        var newArray = [];\n        newArray.push(response.data);\n        that.projectInfo = newArray;\n      });\n    },\n\n    /**\n     * 老师申请加入项目\n     * @param projectId\n     */\n    teacherApplyJoinProject: function teacherApplyJoinProject(teacherprojectId) {\n      var that = this;\n      that.$axios.get(api + \"/teacher/teacherApplyJoinProject/\" + teacherprojectId + \"/\" + that.teacherId).then(function (response) {\n        that.$message({\n          type: response.data.code == 200 ? 'success' : 'warning',\n          message: response.data.message\n        });\n      });\n    },\n    current_change: function current_change(currentPage) {\n      //改变当前页\n      this.currentPage = currentPage;\n    }\n  }\n};",{"version":3,"sources":["teacher_project.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"college_project\">\r\n    <el-card style=\"    margin-bottom: 20px;\">\r\n      <div slot=\"header\">\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"8\">\r\n            <span style=\"font-size: 26px;\">项目列表</span>\r\n          </el-col>\r\n          <el-col :span=\"16\">\r\n            <el-button type=\"text\" style=\"float:right;\" @click=\"导出为Excel()\">导出为Excel</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n      <div>\r\n        <el-row :gutter=\"10\">\r\n          <el-form ref=\"searchProjects\" :model=\"searchProjects\" label-width=\"80px\">\r\n            <el-col :span=\"4\">\r\n              <el-form-item label=\"项目名称\" prop=\"name\">\r\n                <el-input v-model=\"searchProjects.projectName\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              <el-form-item label=\"所属竞赛\" prop=\"suoshujingsai\">\r\n                <el-select v-model=\"searchProjects.compId\" placeholder=\"所属竞赛\">\r\n                  <el-option v-for=\"item in allComp\"\r\n                             :key=\"item.id\"\r\n                             :label=\"item.compName\"\r\n                             :value=\"item.id\">\r\n                  </el-option>\r\n                  <el-option label=\"全部\" value></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              <el-form-item label=\"审核状态\" prop=\"zhuangtai\">\r\n                <el-select v-model=\"searchProjects.applyState\" placeholder=\"请选择项目状态\">\r\n                  <el-option label=\"未审核\" value=0></el-option>\r\n                  <el-option label=\"审核通过\" value=1></el-option>\r\n                  <el-option label=\"审核驳回\" value=2></el-option>\r\n                  <el-option label=\"全部\" value></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"3\">\r\n              <el-button\r\n                      type=\"primary\"\r\n                      size=\"medium\"\r\n                      icon=\"el-icon-search\"\r\n                      style=\"float: right;\"\r\n                      @click=\"findProjectInCollege()\"\r\n              >筛选 / 查询</el-button>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              <el-button\r\n                      type=\"primary\"\r\n                      size=\"medium\"\r\n                      icon=\"el-icon-search\"\r\n                      style=\"float: right;\"\r\n                      @click=\"checkAll()\"\r\n              >查看全部</el-button>\r\n            </el-col>\r\n          </el-form>\r\n        </el-row>\r\n      </div>\r\n      <div>\r\n        <el-table\r\n                id=\"竞赛项目列表\"\r\n                class=\"elTable\"\r\n                :data=\"projectData.slice((currentPage-1)*pagesize,currentPage*pagesize)\"\r\n                stripe\r\n                border\r\n                height=\"560px\"\r\n                style=\"width: 100%\"\r\n                :default-sort = \"{prop: 'date', order: 'descending'}\"\r\n\r\n        >\r\n          <el-table-column align=\"center\"  label=\"项目编号\" width=\"80px\" sortable>\r\n            <template slot-scope=\"scope\">\r\n              {{scope.$index + 1}}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\"  label=\"项目名称\" sortable>\r\n            <template slot-scope=\"scope\">\r\n              <el-tooltip class=\"item\" effect=\"dark\" size=\"mini\" content=\"点击查看项目信息\" placement=\"top-end\">\r\n                <el-button type=\"text\" @click=\"showProjectInfo(scope.row.project.id)\">{{scope.row.project.projectName}}</el-button>\r\n              </el-tooltip>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" prop=\"project.comp.compName\" label=\"所属竞赛\" sortable></el-table-column>\r\n          <el-table-column align=\"center\" prop=\"project.comp.compState\" label=\"所属竞赛状态\" sortable>\r\n            <template slot-scope=\"scope\">\r\n              <el-tag  effect=\"dark\"\r\n                       :type=\"scope.row.project.comp.compState === 0 ? 'info' :       /*规划中*/\r\n              (scope.row.project.comp.compState === 1 ? 'primary':       /*可报名*/\r\n              (scope.row.project.comp.compState === 2 ? 'success':       /*备赛中*/\r\n              (scope.row.project.comp.compState === 3 ? 'warning':       /*比赛中*/\r\n              'danger')))\"\r\n                       disable-transitions\r\n              >\r\n                <span v-if=\"scope.row.project.comp.compState==0\">规划中</span>\r\n                <span v-if=\"scope.row.project.comp.compState==1\">报名中</span>\r\n                <span v-if=\"scope.row.project.comp.compState==2\">备赛中</span>\r\n                <span v-if=\"scope.row.project.comp.compState==3\">比赛中</span>\r\n                <span v-if=\"scope.row.project.comp.compState==4\">已结束</span>\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\"  label=\"指导老师\" width=\"120px\" sortable><!--prop=\"createByTeacher.nickName\"-->\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.project.createByTeacher.nickname}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" prop=\"project.pay\" label=\"预算\" sortable></el-table-column>\r\n          <el-table-column align=\"center\" prop=\"project.applyState\" label=\"状态\" sortable>\r\n            <template slot-scope=\"scope\">\r\n              <el-tag v-if=\"scope.row.project.applyState == 0\" type=\"danger\" disable-transitions>审核未通过</el-tag>\r\n              <el-tag v-if=\"scope.row.project.applyState == 1\" :type=\"scope.row.project.applyState === 1 ? 'success' : 'warning'\" disable-transitions>审核已通过</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" label=\"操作\" width=\"115px\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                      v-if=\"scope.row.project.createByTeacher.id == teacherId\"\r\n                      size=\"mini\"\r\n                      type=\"primary\"\r\n                     disabled\r\n              >领队项目</el-button>\r\n              <el-button\r\n                      v-if=\"scope.row.project.createByTeacher.id != teacherId\"\r\n                      size=\"mini\"\r\n                      type=\"primary\"\r\n                      @click=\"teacherApplyJoinProject(scope.row.id)\"\r\n              >申请加入</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div id=\"fenye\">\r\n          <!-- 设置layout，表示需要显示的内容，用逗号分隔，布局元素会依次显示。\r\n            prev表示上一页，next为下一页，pager表示页码列表，\r\n            除此以外还提供了jumper和total，size和特殊的布局符号->，->后的元素会靠右显示，\r\n            jumper表示跳页元素，\r\n            total表示总条目数，\r\n            page-size  每页多少条数据\r\n            @current-change=\"current_change\" //currentPage改变时会触发\r\n          size用于设置每页显示的页码数量。-->\r\n          <el-pagination\r\n                  background\r\n                  layout=\"prev, pager, next\"\r\n                  :total=\"projectData.length\"\r\n                  :page-size=\"12\"\r\n                  @current-change=\"current_change\"\r\n                  :current-page.sync=\"currentPage\"\r\n          ></el-pagination>\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n    <!-- 学生列表模态框 -->\r\n    <el-dialog title=\"项目成员\" :visible.sync=\"dialogTableVisible\">\r\n      <el-table :data=\"studentData\">\r\n        <el-table-column property=\"id\" label=\"#\" width=\"50\"></el-table-column>\r\n        <el-table-column property=\"studentNumber\" label=\"学号\"></el-table-column>\r\n        <el-table-column property=\"name\" label=\"姓名\"></el-table-column>\r\n        <el-table-column property=\"sex\" label=\"性别\"></el-table-column>\r\n        <el-table-column property=\"age\" label=\"年龄\"></el-table-column>\r\n        <el-table-column property=\"zhuanye\" label=\"所学专业\"></el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n    <!-- 竞赛项目展示模态框 -->\r\n    <el-dialog title=\"项目信息\" :visible.sync=\"projectVisible\" width=\"70%\">\r\n      <el-table  stripe border :data=\"projectInfo\" >\r\n        <el-table-column align=\"center\" label=\"项目编号\" prop=\"id\" ></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"projectName\" label=\"项目名称\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"comp.compName\" label=\"所属竞赛\"></el-table-column>\r\n        <el-table-column align=\"center\" label=\"参与学生人数\" >\r\n          <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.countStudent<scope.row.comp.maxCountStudent\">{{scope.row.countStudent}}人</span>\r\n            <span v-if=\"scope.row.countStudent>=scope.row.comp.maxCountStudent\">{{scope.row.countStudent}}人(满员)</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"参与教师人数\" >\r\n          <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.countTeacher<scope.row.comp.maxCountTeacher\">{{scope.row.countTeacher}}人</span>\r\n            <span v-if=\"scope.row.countTeacher>=scope.row.comp.maxCountTeacher\">{{scope.row.countTeacher}}人(满员)</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"createByTeacher.nickname\" label=\"指导老师\" ></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"createByTeacher.username\" label=\"指导老师用户名\" ></el-table-column>\r\n        <el-table-column align=\"center\" label=\"预算\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{scope.row.pay}}元</span>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<style>\r\n  .clearfix {\r\n    font-size: 26px;\r\n  }\r\n  #fenye {\r\n    text-align: center;\r\n    margin-top: 20px;\r\n  }\r\n</style>\r\n<script>\r\n  import api from '../../main.js'\r\n  import { exportExcel } from \"../../assets/js/utils.js\";\r\n  export default {\r\n    inject:['reload'],\r\n    name: \"college_project\",\r\n    data() {\r\n      return {\r\n        allComp:[],\r\n        teacherId:\"\",\r\n        projectVisible:false,\r\n        dialogTableVisible: false,\r\n        pagesize: 12,\r\n        currentPage: 1,\r\n        projectInfo:[],\r\n        studentData: [],\r\n        projectData: [],\r\n        searchProjects: {\r\n          projectName:\"\",\r\n          compId:\"\",\r\n          applyState:\"\",\r\n        }\r\n      };\r\n    },\r\n    mounted() {\r\n      this.getAllComp();\r\n      this.teacherId=this.$store.state.id;\r\n      this.getProjectData();\r\n    },\r\n    methods: {\r\n      getAllComp(){\r\n        let that=this;\r\n        that.$axios\r\n        .post(api+`/comp/getAllComps`)\r\n        .then(function (response) {\r\n          that.allComp=response.data;\r\n        })\r\n      },\r\n      /**\r\n       * 得到院系所有的项目\r\n       */\r\n      getProjectData() {\r\n        let that = this;\r\n        this.$axios\r\n        .get(api+`/teacher/getProjectByCollegeWithTeacher/`+that.teacherId)\r\n        .then(function(response) {\r\n          that.projectData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n          console.error(error);\r\n        });\r\n      },\r\n      checkAll(){\r\n        let that=this;\r\n        that.reload();\r\n      },\r\n      findProjectInCollege() {\r\n        let that = this;\r\n        let searchForm=new FormData();\r\n        searchForm.append(\"projectName\",that.searchProjects.projectName);\r\n        searchForm.append(\"comp.id\",that.searchProjects.compId);\r\n        searchForm.append(\"applyState\",that.searchProjects.applyState);\r\n        searchForm.append(\"teacherId\",that.teacherId);\r\n        this.$axios\r\n        .post(api+`/project/getMoreSearchProjectByTeacher`,searchForm)\r\n        .then(function(response) {\r\n          that.projectData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n          that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n        });\r\n      },\r\n      人员查看(row) {\r\n        let that = this;\r\n        this.$axios\r\n        .get(\r\n            `http://localhost:8088/school/selectStudentByProId?projectId=${row.id}`\r\n        )\r\n        .then(function(response) {\r\n          if (response.data == null) {\r\n            that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n          } else {\r\n            that.studentData = response.data;\r\n            that.dialogTableVisible = true;\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n        });\r\n      },\r\n      导出为Excel() {\r\n        let excelname = this.$store.state.nickname + \"竞赛项目\";\r\n        exportExcel(\"竞赛项目列表\", excelname);\r\n      },\r\n      showProjectInfo(projectId){\r\n        let that=this;\r\n        that.projectVisible=true;\r\n        that.$axios\r\n          .get(api+`/teacher/getProjectById/`+projectId)\r\n          .then(function (response) {\r\n            let newArray=[];\r\n            newArray.push(response.data);\r\n            that.projectInfo=newArray;\r\n          })\r\n\r\n      },\r\n      /**\r\n       * 老师申请加入项目\r\n       * @param projectId\r\n       */\r\n      teacherApplyJoinProject(teacherprojectId){\r\n        let that=this;\r\n        that.$axios\r\n          .get(api+`/teacher/teacherApplyJoinProject/`+teacherprojectId+`/`+that.teacherId)\r\n          .then(function (response) {\r\n            that.$message({\r\n              type:response.data.code==200?'success':'warning',\r\n              message:response.data.message\r\n            })\r\n          })\r\n      },\r\n      current_change(currentPage) {\r\n        //改变当前页\r\n        this.currentPage = currentPage;\r\n      },\r\n    }\r\n  };\r\n</script>"],"sourceRoot":"src/views/teacher"}]}