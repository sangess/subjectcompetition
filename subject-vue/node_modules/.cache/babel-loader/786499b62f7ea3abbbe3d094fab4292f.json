{"remainingRequest":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\IDEA_workspace2\\subject-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IDEA_workspace2\\subject-vue\\src\\views\\admin\\admin_project.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IDEA_workspace2\\subject-vue\\src\\views\\admin\\admin_project.vue","mtime":1584549705549},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { dateFormat } from \"../../assets/js/utils.js\";\nexport default {\n  name: \"admin_project\",\n  data: function data() {\n    return {\n      activeName: \"竞赛项目列表\",\n      loading: true,\n      pagesize: 15,\n      currentPage: 1,\n      tableData: [],\n      xinxiDialogFormVisible: false,\n      xinxiDialogForm: {},\n      liebiaoSearchForm: {\n        name: \"\",\n        suoshuxueyuan: \"\"\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.查看全部();\n  },\n  methods: {\n    点击筛选查询按钮: function _() {\n      var that = this;\n      var name = that.liebiaoSearchForm.name;\n      var suoshuxueyuan = that.liebiaoSearchForm.suoshuxueyuan;\n      this.$axios.get(\"http://localhost:8088/project/relationProAndCompByLikeNS?name=\".concat(name, \"&suoshuxueyuan=\").concat(suoshuxueyuan)).then(function (response) {\n        that.tableData = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    current_change: function current_change(currentPage) {\n      //改变当前页\n      this.currentPage = currentPage;\n    },\n    筛选学院: function _(name) {\n      var that = this;\n      this.$axios.get(\"http://localhost:8088/project/selectProjectBySchoolName/?name=\".concat(name)).then(function (response) {\n        that.tableData = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    筛选状态: function _(zhuangtai) {\n      var that = this;\n      this.$axios.get(\"http://localhost:8088/project/selectProjectByZhuangtai/?zhuangtai=\".concat(zhuangtai)).then(function (response) {\n        that.tableData = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    查看全部: function _() {\n      var that = this; // 查询全部已审核项目\n\n      this.$axios.get(\"http://localhost:8088/project/relationProAndCompByZt?zhuangtai=\\u5DF2\\u5BA1\\u6838\").then(function (response) {\n        console.log(response.data);\n        that.tableData = response.data;\n        that.proNum = response.data.length;\n        that.loading = false;\n      }).catch(function (error) {\n        console.log(error);\n        that.loading = false;\n      }); // console.log(that.tableData);\n    },\n    关联查询筛选状态: function _(zhuangtai) {\n      console.log(\"=====关联查询筛选状态=====\");\n      var that = this;\n      this.$axios.get(\"http://localhost:8088/project/relationProAndCompByZtV/?zhuangtai=\".concat(zhuangtai, \"&visible=1\")).then(function (response) {\n        that.tableData = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    点击通过审核按钮: function _(rowProject) {\n      var _this = this;\n\n      var that = this;\n      this.$confirm(\"是否确定审核通过？\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        var formData = new FormData(); //将项目ID暂存到信息中。\n\n        formData.append(\"id\", rowProject.id);\n        formData.append(\"title\", \"您有新的消息\");\n        formData.append(\"body\", \"您申请的 [\" + rowProject.name + \"] 竞赛项目已通过审核！\");\n        formData.append(\"fasongzhe\", _this.$store.state.userinfo.username);\n        formData.append(\"jieshouzhe\", rowProject.suoshuxueyuan);\n        formData.append(\"time\", dateFormat(\"YYYY-mm-dd HH:MM\", new Date()));\n\n        _this.$axios.post(\"http://localhost:8088/project/projectPassed\", formData).then(function (response) {\n          if (response.data == \"error\") {\n            that.$message.error(\"服务器错误!审核失败！\");\n          } else {\n            that.$message({\n              message: response.data,\n              type: \"success\"\n            });\n            that.关联查询筛选状态(\"待审核\");\n          }\n        }).catch(function (error) {\n          that.$message.error(\"系统出现异常!审核失败！\");\n        });\n      }).catch(function () {\n        _this.$message({\n          type: \"info\",\n          message: \"已取消\"\n        });\n      });\n    },\n    点击不通过审核按钮: function _(rowProject) {\n      var that = this;\n      that.xinxiDialogFormVisible = true;\n      that.xinxiDialogForm.title = \"您申请的[\" + rowProject.name + \"]竞赛项目未通过审核\";\n      that.xinxiDialogForm.jieshouzhe = rowProject.suoshuxueyuan;\n      that.xinxiDialogForm.projectId = rowProject.id;\n    },\n    点击审核模态框取消按钮: function _() {\n      this.xinxiDialogForm = {};\n      this.xinxiDialogFormVisible = false;\n    },\n    点击审核模态框确认按钮: function _() {\n      var postFromData = new FormData(); //将项目ID暂存到信息中。\n\n      postFromData.append(\"id\", this.xinxiDialogForm.projectId);\n      postFromData.append(\"title\", this.xinxiDialogForm.title);\n      postFromData.append(\"body\", this.xinxiDialogForm.body);\n      postFromData.append(\"fasongzhe\", this.$store.state.userinfo.username);\n      postFromData.append(\"jieshouzhe\", this.xinxiDialogForm.jieshouzhe);\n      postFromData.append(\"time\", dateFormat(\"YYYY-mm-dd HH:MM\", new Date()));\n      var that = this;\n      this.$axios.post(\"http://localhost:8088/xinxi/projectNoPass\", postFromData).then(function (response) {\n        if (response.data == \"error\") {\n          that.$message.error(\"服务器错误!审核失败！\");\n        } else {\n          that.$message({\n            message: response.data,\n            type: \"success\"\n          });\n          that.关联查询筛选状态(\"待审核\");\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n      that.xinxiDialogForm = {};\n      that.xinxiDialogFormVisible = false;\n    },\n    handleClick: function handleClick(tab, event) {// console.log(tab, event);\n    }\n  },\n  watch: {\n    activeName: function activeName(val, oldVal) {\n      var that = this;\n      that.tableData = [];\n\n      switch (that.activeName) {\n        case \"竞赛项目审核\":\n          that.关联查询筛选状态(\"待审核\");\n          break;\n\n        case \"竞赛项目列表\":\n          that.查看全部();\n          break;\n      }\n    }\n  }\n};",{"version":3,"sources":["admin_project.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"admin_project\">\r\n    <el-card>\r\n      <div>\r\n        <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n          <!-- ======================竞赛项目列表=========================== -->\r\n          <el-tab-pane label=\"竞赛项目列表\" name=\"竞赛项目列表\">\r\n            <div style=\"margin-bottom: 15px;\">\r\n              <el-row :gutter=\"10\" style=\"margin-top: 15px;\">\r\n                <el-col :span=\"2\">\r\n                  <el-button type=\"primary\" size=\"medium\" plain @click=\"查看全部()\">查看全部</el-button>\r\n                </el-col>\r\n                <el-form ref=\"liebiaoSearchForm\" :model=\"liebiaoSearchForm\" label-width=\"80px\">\r\n                  <el-col :span=\"4\">\r\n                    <el-form-item label=\"项目名称\" prop=\"name\">\r\n                      <el-input v-model=\"liebiaoSearchForm.name\"></el-input>\r\n                    </el-form-item>\r\n                  </el-col>\r\n                  \r\n                  <el-col :span=\"5\">\r\n                    <el-form-item label=\"所属学院\" prop=\"suoshuxueyuan\">\r\n                      <el-select v-model=\"liebiaoSearchForm.suoshuxueyuan\" placeholder=\"请选择学院\">\r\n                        <el-option label=\"艺术学院\" value=\"艺术学院\"></el-option>\r\n                        <el-option label=\"生命科学技术学院\" value=\"生命科学技术学院\"></el-option>\r\n                        <el-option label=\"数学与信息科学学院\" value=\"数学与信息科学学院\"></el-option>\r\n                        <el-option label=\"物理与电子工程学院\" value=\"物理与电子工程学院\"></el-option>\r\n                        <el-option label=\"土木工程与建筑学院\" value=\"土木工程与建筑学院\"></el-option>\r\n                        <el-option label=\"计算机与信息工程学院\" value=\"计算机与信息工程学院\"></el-option>\r\n                        <el-option label value></el-option>\r\n                      </el-select>\r\n                    </el-form-item>\r\n                  </el-col>\r\n\r\n                  <el-col :span=\"2\">\r\n                    <el-button\r\n                      type=\"primary\"\r\n                      size=\"medium\"\r\n                      icon=\"el-icon-search\"\r\n                      @click=\"点击筛选查询按钮()\"\r\n                    >筛选 / 查询</el-button>\r\n                  </el-col>\r\n                </el-form>\r\n              </el-row>\r\n            </div>\r\n            <div>\r\n              <el-table\r\n                v-loading=\"loading\"\r\n                :data=\"tableData.slice((currentPage-1)*pagesize,currentPage*pagesize)\"\r\n                height=\"635px\"\r\n                stripe\r\n                border\r\n                style=\"width: 100%\"\r\n              >\r\n                <el-table-column align=\"center\" prop=\"id\" label=\"项目ID\" width=\"80px\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"name\" label=\"项目名称\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"compName\" label=\"所属竞赛\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"suoshuxueyuan\" label=\"所属学院\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"zhidaolaoshi\" label=\"指导老师\" width=\"120px\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"yusuan\" label=\"预算\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"compZhuangtai\" label=\"所属竞赛状态\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-tag\r\n                      :type=\"scope.row.compZhuangtai === '进行中' ? 'success' : (scope.row.compZhuangtai === '未开始' ? 'primary':'warning')\"\r\n                      disable-transitions\r\n                    >{{scope.row.compZhuangtai}}</el-tag>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <div id=\"fenye\">\r\n                <!-- 设置layout，表示需要显示的内容，用逗号分隔，布局元素会依次显示。\r\n          prev表示上一页，next为下一页，pager表示页码列表，\r\n          除此以外还提供了jumper和total，size和特殊的布局符号->，->后的元素会靠右显示，\r\n          jumper表示跳页元素，\r\n          total表示总条目数，\r\n          page-size  每页多少条数据\r\n          @current-change=\"current_change\" //currentPage改变时会触发\r\n                size用于设置每页显示的页码数量。-->\r\n                <el-pagination\r\n                  background\r\n                  layout=\"prev, pager, next\"\r\n                  :total=\"tableData.length\"\r\n                  :page-size=\"15\"\r\n                  @current-change=\"current_change\"\r\n                  :current-page.sync=\"currentPage\"\r\n                ></el-pagination>\r\n              </div>\r\n            </div>\r\n          </el-tab-pane>\r\n          <!-- ======================竞赛项目审核=========================== -->\r\n          <el-tab-pane label=\"竞赛项目审核\" name=\"竞赛项目审核\">\r\n            <div>\r\n              <el-table\r\n                v-loading=\"loading\"\r\n                :data=\"tableData.slice((currentPage-1)*pagesize,currentPage*pagesize)\"\r\n                height=\"720px\"\r\n                stripe\r\n                border\r\n                style=\"width: 100%\"\r\n              >\r\n                <el-table-column align=\"center\" prop=\"id\" label=\"项目ID\" width=\"80px\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"name\" label=\"项目名称\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"compName\" label=\"所属竞赛\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"suoshuxueyuan\" label=\"所属学院\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"zhidaolaoshi\" label=\"指导老师\" width=\"120px\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"yusuan\" label=\"预算\" width=\"110px\"></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"compZhuangtai\" label=\"所属竞赛状态\" width=\"115px\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-tag\r\n                      :type=\"scope.row.compZhuangtai === '进行中' ? 'success' : (scope.row.compZhuangtai === '未开始' ? 'primary':'warning')\"\r\n                      disable-transitions\r\n                    >{{scope.row.compZhuangtai}}</el-tag>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\" prop=\"zhuangtai\" label=\"项目状态\" width=\"115px\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-tag\r\n                      :type=\"scope.row.zhuangtai === '已审核' ? 'success' : 'warning'\"\r\n                      disable-transitions\r\n                    >{{scope.row.zhuangtai}}</el-tag>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\" label=\"操作\" width=\"130\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-tooltip class=\"item\" effect=\"dark\" content=\"通过审核\" placement=\"top\">\r\n                      <el-button\r\n                        type=\"primary\"\r\n                        icon=\"el-icon-s-promotion\"\r\n                        circle\r\n                        @click=\"点击通过审核按钮(scope.row)\"\r\n                      ></el-button>\r\n                    </el-tooltip>\r\n                    <el-tooltip class=\"item\" effect=\"dark\" content=\"审核不通过\" placement=\"top\">\r\n                      <el-button\r\n                        type=\"danger\"\r\n                        icon=\"el-icon-error\"\r\n                        circle\r\n                        @click=\"点击不通过审核按钮(scope.row)\"\r\n                      ></el-button>\r\n                    </el-tooltip>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <div id=\"fenye\">\r\n                <el-pagination\r\n                  background\r\n                  layout=\"prev, pager, next\"\r\n                  :total=\"tableData.length\"\r\n                  :page-size=\"15\"\r\n                  @current-change=\"current_change\"\r\n                  :current-page.sync=\"currentPage\"\r\n                ></el-pagination>\r\n              </div>\r\n            </div>\r\n          </el-tab-pane>\r\n          \r\n        </el-tabs>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 填写审核信息模态框 -->\r\n    <div class=\"xinxiDialog\">\r\n      <el-dialog\r\n        title=\"请填写审核不通过原因及相关信息\"\r\n        :visible.sync=\"xinxiDialogFormVisible \"\r\n        :close-on-click-modal=\"false\"\r\n        :close-on-press-escape=\"false\"\r\n      >\r\n        <el-form :model=\"xinxiDialogForm\">\r\n          <el-form-item label=\"标题\">\r\n            <el-input class=\"xinxiDialogTitle\" v-model=\"xinxiDialogForm.title\" readonly></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"内容\">\r\n            <el-input type=\"textarea\" v-model=\"xinxiDialogForm.body\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"接收方\">\r\n            <el-input v-model=\"xinxiDialogForm.jieshouzhe\" readonly></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"点击审核模态框取消按钮()\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"点击审核模态框确认按钮()\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { dateFormat } from \"../../assets/js/utils.js\";\r\nexport default {\r\n  name: \"admin_project\",\r\n  data() {\r\n    return {\r\n      activeName: \"竞赛项目列表\",\r\n      loading: true,\r\n      pagesize: 15,\r\n      currentPage: 1,\r\n      tableData: [],\r\n      xinxiDialogFormVisible: false,\r\n      xinxiDialogForm: {},\r\n      liebiaoSearchForm: {\r\n        name: \"\",\r\n        suoshuxueyuan: \"\"\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    this.查看全部();\r\n  },\r\n  methods: {\r\n    点击筛选查询按钮(){\r\n      let that = this;\r\n      let name = that.liebiaoSearchForm.name;\r\n      let suoshuxueyuan = that.liebiaoSearchForm.suoshuxueyuan;\r\n    \r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/relationProAndCompByLikeNS?name=${name}&suoshuxueyuan=${suoshuxueyuan}`\r\n        )\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    current_change(currentPage) {\r\n      //改变当前页\r\n      this.currentPage = currentPage;\r\n    },\r\n    筛选学院(name) {\r\n      let that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/selectProjectBySchoolName/?name=${name}`\r\n        )\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    筛选状态(zhuangtai) {\r\n      let that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/selectProjectByZhuangtai/?zhuangtai=${zhuangtai}`\r\n        )\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    查看全部() {\r\n      let that = this;\r\n      // 查询全部已审核项目\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/relationProAndCompByZt?zhuangtai=已审核`\r\n        )\r\n        .then(function(response) {\r\n          console.log(response.data);\r\n          that.tableData = response.data;\r\n          that.proNum = response.data.length;\r\n          that.loading = false;\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n          that.loading = false;\r\n        });\r\n      // console.log(that.tableData);\r\n    },\r\n    关联查询筛选状态(zhuangtai) {\r\n      console.log(\"=====关联查询筛选状态=====\");\r\n      var that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/relationProAndCompByZtV/?zhuangtai=${zhuangtai}&visible=1`\r\n        )\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    点击通过审核按钮(rowProject) {\r\n      var that = this;\r\n      this.$confirm(\"是否确定审核通过？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          let formData = new FormData();\r\n          //将项目ID暂存到信息中。\r\n          formData.append(\"id\", rowProject.id);\r\n          formData.append(\"title\", \"您有新的消息\");\r\n          formData.append(\r\n            \"body\",\r\n            \"您申请的 [\" + rowProject.name + \"] 竞赛项目已通过审核！\"\r\n          );\r\n          formData.append(\"fasongzhe\", this.$store.state.userinfo.username);\r\n          formData.append(\"jieshouzhe\", rowProject.suoshuxueyuan);\r\n          formData.append(\"time\", dateFormat(\"YYYY-mm-dd HH:MM\", new Date()));\r\n          this.$axios\r\n            .post(`http://localhost:8088/project/projectPassed`, formData)\r\n            .then(function(response) {\r\n              if (response.data == \"error\") {\r\n                that.$message.error(\"服务器错误!审核失败！\");\r\n              } else {\r\n                that.$message({\r\n                  message: response.data,\r\n                  type: \"success\"\r\n                });\r\n                that.关联查询筛选状态(\"待审核\");\r\n              }\r\n            })\r\n            .catch(function(error) {\r\n              that.$message.error(\"系统出现异常!审核失败！\");\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消\"\r\n          });\r\n        });\r\n    },\r\n    点击不通过审核按钮(rowProject) {\r\n      let that = this;\r\n      that.xinxiDialogFormVisible = true;\r\n      that.xinxiDialogForm.title =\r\n        \"您申请的[\" + rowProject.name + \"]竞赛项目未通过审核\";\r\n\r\n      that.xinxiDialogForm.jieshouzhe = rowProject.suoshuxueyuan;\r\n      that.xinxiDialogForm.projectId = rowProject.id;\r\n    },\r\n    点击审核模态框取消按钮() {\r\n      this.xinxiDialogForm = {};\r\n      this.xinxiDialogFormVisible = false;\r\n    },\r\n    点击审核模态框确认按钮() {\r\n      let postFromData = new FormData();\r\n      //将项目ID暂存到信息中。\r\n      postFromData.append(\"id\", this.xinxiDialogForm.projectId);\r\n      postFromData.append(\"title\", this.xinxiDialogForm.title);\r\n      postFromData.append(\"body\", this.xinxiDialogForm.body);\r\n      postFromData.append(\"fasongzhe\", this.$store.state.userinfo.username);\r\n      postFromData.append(\"jieshouzhe\", this.xinxiDialogForm.jieshouzhe);\r\n      postFromData.append(\"time\", dateFormat(\"YYYY-mm-dd HH:MM\", new Date()));\r\n\r\n      let that = this;\r\n      this.$axios\r\n        .post(`http://localhost:8088/xinxi/projectNoPass`, postFromData)\r\n        .then(function(response) {\r\n          if (response.data == \"error\") {\r\n            that.$message.error(\"服务器错误!审核失败！\");\r\n          } else {\r\n            that.$message({\r\n              message: response.data,\r\n              type: \"success\"\r\n            });\r\n            that.关联查询筛选状态(\"待审核\");\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n      that.xinxiDialogForm = {};\r\n      that.xinxiDialogFormVisible = false;\r\n    },\r\n    handleClick(tab, event) {\r\n      // console.log(tab, event);\r\n    }\r\n  },\r\n  watch: {\r\n    activeName(val, oldVal) {\r\n      let that = this;\r\n      that.tableData = [];\r\n      switch (that.activeName) {\r\n        case \"竞赛项目审核\":\r\n          that.关联查询筛选状态(\"待审核\");\r\n          break;\r\n        case \"竞赛项目列表\":\r\n          that.查看全部();\r\n          break;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-card {\r\n  border-radius: 25px;\r\n}\r\n#fenye {\r\n  text-align: center;\r\n  margin-top: 20px;\r\n}\r\n.xinxiDialog .el-dialog {\r\n  width: 30%;\r\n}\r\n.xinxiDialog textarea.el-textarea__inner {\r\n  height: 180px;\r\n  font-size: 20px;\r\n}\r\n.xinxiDialog .xinxiDialogTitle .el-input__inner {\r\n  font-weight: bold;\r\n  color: chocolate;\r\n}\r\n</style>"],"sourceRoot":"src/views/admin"}]}