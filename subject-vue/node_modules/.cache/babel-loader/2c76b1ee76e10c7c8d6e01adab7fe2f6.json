{"remainingRequest":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\IDEA_workspace2\\subject-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IDEA_workspace2\\subject-vue\\src\\views\\admin\\admin_project.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IDEA_workspace2\\subject-vue\\src\\views\\admin\\admin_project.vue","mtime":1621104297674},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport api from \"../../main.js\";\nexport default {\n  name: \"admin_project\",\n  data: function data() {\n    return {\n      allComp: [],\n      projectVisible: false,\n      projectInfo: [],\n      activeName: \"竞赛项目列表\",\n      createProjectTeacherId: \"\",\n      loading: true,\n      pagesize: 15,\n      currentPage: 1,\n      tableData: [],\n      xinxiDialogFormVisible: false,\n      projectPersonInfo: false,\n      projectJoinStudent: [],\n      projectJoinTeacher: [],\n      searchProjects: {\n        projectName: \"\",\n        compId: \"\",\n        applyState: \"\"\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.getAllComp();\n    this.getAllProjects();\n  },\n  methods: {\n    getAllComp: function getAllComp() {\n      var that = this;\n      that.$axios.post(api + \"/comp/getAllComps\").then(function (response) {\n        that.allComp = response.data;\n      });\n    },\n    getMoreSearchAllProjects: function getMoreSearchAllProjects() {\n      var that = this;\n      var searchForm = new FormData();\n      searchForm.append(\"projectName\", that.searchProjects.projectName);\n      searchForm.append(\"comp.id\", that.searchProjects.compId);\n      searchForm.append(\"applyState\", that.searchProjects.applyState);\n      this.$axios.post(api + \"/project/getMoreSearchAllProjects\", searchForm).then(function (response) {\n        that.collegeProjectData = response.data;\n      }).catch(function (error) {\n        that.$message.error(\"系统错误，操作失败，请稍后再试!\");\n      });\n    },\n    current_change: function current_change(currentPage) {\n      //改变当前页\n      this.currentPage = currentPage;\n    },\n    getProjectJoinPersons: function getProjectJoinPersons(project) {\n      var projectId = project.id;\n      this.createProjectTeacherId = project.createByTeacher.id;\n      this.projectPersonInfo = true;\n      this.getProjectJoinTeacher(projectId);\n      this.getProjectJoinStudent(projectId);\n    },\n\n    /**\n     * 得到参赛的老师\n     * @param projectId\n     */\n    getProjectJoinTeacher: function getProjectJoinTeacher(projectId) {\n      var that = this;\n      that.$axios.get(api + \"/project/getProjectJoinTeacher/\" + projectId).then(function (response) {\n        that.projectJoinTeacher = response.data;\n      });\n    },\n\n    /**\n     * 得到参赛的学生\n     * @param projectId\n     */\n    getProjectJoinStudent: function getProjectJoinStudent(projectId) {\n      var that = this;\n      that.$axios.get(api + \"/project/getProjectJoinStudent/\" + projectId).then(function (response) {\n        that.projectJoinStudent = response.data;\n      });\n    },\n    筛选学院: function 筛选学院(name) {\n      var that = this;\n      this.$axios.get(\"http://localhost:8088/project/selectProjectBySchoolName/?name=\".concat(name)).then(function (response) {\n        that.tableData = response.data;\n      }).catch(function (error) {});\n    },\n    筛选状态: function 筛选状态(zhuangtai) {\n      var that = this;\n      this.$axios.get(\"http://localhost:8088/project/selectProjectByZhuangtai/?zhuangtai=\".concat(zhuangtai)).then(function (response) {\n        that.tableData = response.data;\n      }).catch(function (error) {});\n    },\n    getAllProjects: function getAllProjects() {\n      var that = this; // 查询全部已审核项目\n\n      this.$axios.get(api + \"/admin/getAllProjects\").then(function (response) {\n        that.tableData = response.data;\n        that.proNum = response.data.length;\n        that.loading = false;\n      }).catch(function (error) {\n        that.loading = false;\n      });\n    },\n    关联查询筛选状态: function 关联查询筛选状态(zhuangtai) {\n      var that = this;\n      this.$axios.get(\"http://localhost:8088/project/relationProAndCompByZtV/?zhuangtai=\".concat(zhuangtai, \"&visible=1\")).then(function (response) {\n        that.tableData = response.data;\n      }).catch(function (error) {});\n    },\n    handleClick: function handleClick(tab, event) {},\n\n    /**\n     * 点击查看项目信息\n     * @param projectId\n     */\n    showProjectInfo: function showProjectInfo(projectId) {\n      var that = this;\n      that.projectVisible = true;\n      that.$axios.get(api + \"/teacher/getProjectById/\" + projectId).then(function (response) {\n        var newArray = [];\n        newArray.push(response.data);\n        that.projectInfo = newArray;\n      });\n    }\n  },\n  watch: {\n    activeName: function activeName(val, oldVal) {\n      var that = this;\n      that.tableData = [];\n\n      switch (that.activeName) {\n        case \"竞赛项目审核\":\n          that.关联查询筛选状态(\"待审核\");\n          break;\n\n        case \"竞赛项目列表\":\n          that.getAllProjects();\n          break;\n      }\n    }\n  }\n};",{"version":3,"sources":["admin_project.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"admin_project\">\r\n    <el-card style=\"height: 690px\">\r\n      <div>\r\n        <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n          <!-- ======================竞赛项目列表=========================== -->\r\n          <el-tab-pane label=\"竞赛项目列表\" name=\"竞赛项目列表\">\r\n            <div >\r\n              <el-row :gutter=\"10\">\r\n                <el-form ref=\"searchProjects\" :model=\"searchProjects\" label-width=\"80px\">\r\n                  <el-col :span=\"4\">\r\n                    <el-form-item label=\"项目名称\" prop=\"name\">\r\n                      <el-input v-model=\"searchProjects.projectName\"></el-input>\r\n                    </el-form-item>\r\n                  </el-col>\r\n                  <el-col :span=\"4\">\r\n                    <el-form-item label=\"所属竞赛\" prop=\"suoshujingsai\">\r\n                      <el-select v-model=\"searchProjects.compId\" placeholder=\"所属竞赛\">\r\n                        <el-option v-for=\"item in allComp\"\r\n                                   :key=\"item.id\"\r\n                                   :label=\"item.compName\"\r\n                                   :value=\"item.id\">\r\n                        </el-option>\r\n                        <el-option label value></el-option>\r\n                      </el-select>\r\n                    </el-form-item>\r\n                  </el-col>\r\n                  <el-col :span=\"4\">\r\n                    <el-form-item label=\"审核状态\" prop=\"zhuangtai\">\r\n                      <el-select v-model=\"searchProjects.applyState\" placeholder=\"请选择项目状态\">\r\n                        <el-option label=\"未审核\" value=0></el-option>\r\n                        <el-option label=\"审核通过\" value=1></el-option>\r\n                        <el-option label=\"审核驳回\" value=2></el-option>\r\n                        <el-option label value></el-option>\r\n                      </el-select>\r\n                    </el-form-item>\r\n                  </el-col>\r\n                  <el-col :span=\"3\">\r\n                    <el-button\r\n                            type=\"primary\"\r\n                            size=\"medium\"\r\n                            icon=\"el-icon-search\"\r\n                            style=\"float: right;\"\r\n                            @click=\"getMoreSearchAllProjects()\"\r\n                    >筛选 / 查询</el-button>\r\n                  </el-col>\r\n                  <el-col :span=\"4\">\r\n                    <el-button\r\n                            type=\"primary\"\r\n                            size=\"medium\"\r\n                            icon=\"el-icon-search\"\r\n                            style=\"float: right;\"\r\n                            @click=\"getAllProjects()\"\r\n                    >查看全部</el-button>\r\n                  </el-col>\r\n                </el-form>\r\n              </el-row>\r\n            </div>\r\n            <div>\r\n              <el-table\r\n                v-loading=\"loading\"\r\n                :data=\"tableData.slice((currentPage-1)*pagesize,currentPage*pagesize)\"\r\n                height=\"480px\"\r\n                stripe\r\n                border\r\n                style=\"width: 100%\"\r\n                :default-sort = \"{prop: 'date', order: 'descending'}\"\r\n              >\r\n                <el-table-column align=\"center\"  label=\"项目编号\" width=\"80px\" sortable>\r\n                  <template slot-scope=\"scope\">\r\n                    {{scope.$index + 1}}\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\"  label=\"项目名称\" sortable>\r\n                  <template slot-scope=\"scope\">\r\n                    <el-tooltip class=\"item\" effect=\"dark\"  content=\"点击查看项目信息\" placement=\"top-end\">\r\n                    <el-button type=\"text\" @click=\"showProjectInfo(scope.row.id)\">{{scope.row.projectName}}</el-button>\r\n                  </el-tooltip>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\" prop=\"comp.compName\" label=\"所属竞赛\" sortable></el-table-column>\r\n                <el-table-column align=\"center\" label=\"参赛人员\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button\r\n                            v-if=\"scope.row.applyState == 1\"\r\n                            size=\"mini\"\r\n                            type=\"primary\"\r\n                            @click=\"getProjectJoinPersons(scope.row)\"\r\n                    >人员查看</el-button>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\"  label=\"指导老师\" width=\"120px\"><!--prop=\"createByTeacher.nickName\"-->\r\n                  <template slot-scope=\"scope\">\r\n                    <span>{{scope.row.createByTeacher.nickname}}</span>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\" prop=\"pay\" label=\"预算\" sortable></el-table-column>\r\n                <el-table-column align=\"center\" prop=\"applyState\" label=\"状态\" sortable>\r\n                  <template slot-scope=\"scope\">\r\n                    <el-tag v-if=\"scope.row.applyState == 0\" type=\"danger\" disable-transitions>审核未通过</el-tag>\r\n                    <el-tag v-if=\"scope.row.applyState == 1\" :type=\"scope.row.applyState === 1 ? 'success' : 'warning'\" disable-transitions>已审核</el-tag>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\" prop=\"comp.compState\" label=\"所属竞赛状态\" sortable>\r\n                  <template slot-scope=\"scope\">\r\n                    <el-tag  effect=\"dark\"\r\n                             :type=\"scope.row.comp.compState === 0 ? 'info' :       /*规划中*/\r\n              (scope.row.comp.compState === 1 ? 'primary':       /*可报名*/\r\n              (scope.row.comp.compState === 2 ? 'success':       /*备赛中*/\r\n              (scope.row.comp.compState === 3 ? 'warning':       /*比赛中*/\r\n              'danger')))\"\r\n                             disable-transitions\r\n                    >\r\n                      <span v-if=\"scope.row.comp.compState==0\">规划中</span>\r\n                      <span v-if=\"scope.row.comp.compState==1\">报名中</span>\r\n                      <span v-if=\"scope.row.comp.compState==2\">备赛中</span>\r\n                      <span v-if=\"scope.row.comp.compState==3\">比赛中</span>\r\n                      <span v-if=\"scope.row.comp.compState==4\">已结束</span>\r\n                    </el-tag>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <div id=\"fenye\">\r\n                <!-- 设置layout，表示需要显示的内容，用逗号分隔，布局元素会依次显示。\r\n          prev表示上一页，next为下一页，pager表示页码列表，\r\n          除此以外还提供了jumper和total，size和特殊的布局符号->，->后的元素会靠右显示，\r\n          jumper表示跳页元素，\r\n          total表示总条目数，\r\n          page-size  每页多少条数据\r\n          @current-change=\"current_change\" //currentPage改变时会触发\r\n                size用于设置每页显示的页码数量。-->\r\n                <el-pagination\r\n                  background\r\n                  layout=\"prev, pager, next\"\r\n                  :total=\"tableData.length\"\r\n                  :page-size=\"15\"\r\n                  @current-change=\"current_change\"\r\n                  :current-page.sync=\"currentPage\"\r\n                ></el-pagination>\r\n              </div>\r\n            </div>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </div>\r\n    </el-card>\r\n    <!--参赛人员列表-->\r\n    <el-dialog title=\"项目成员\" :visible.sync=\"projectPersonInfo\">\r\n      <el-table :data=\"projectJoinTeacher\">\r\n        <el-table-column property=\"nickname\" label=\"教师姓名\"></el-table-column>\r\n        <el-table-column property=\"username\" label=\"用户名\"></el-table-column>\r\n        <el-table-column property=\"college.nickname\" label=\"所属院系\"></el-table-column>\r\n        <el-table-column label=\"身份\">\r\n          <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.id==createProjectTeacherId\">\r\n              <el-tag type=\"success\">带队老师</el-tag>\r\n            </span>\r\n            <span v-if=\"scope.row.id!=createProjectTeacherId\">\r\n              指导老师\r\n            </span>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-table :data=\"projectJoinStudent\">\r\n        <el-table-column property=\"nickname\" label=\"学生姓名\"></el-table-column>\r\n        <el-table-column property=\"username\" label=\"学号\"></el-table-column>\r\n        <el-table-column property=\"college.nickname\" label=\"所属院系\"></el-table-column>\r\n        <el-table-column label=\"身份\">参赛学员</el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n    <!-- 竞赛项目展示模态框 -->\r\n    <el-dialog title=\"项目信息\" :visible.sync=\"projectVisible\" width=\"70%\">\r\n      <el-table  stripe border :data=\"projectInfo\" >\r\n        <el-table-column align=\"center\" label=\"项目编号\" prop=\"id\" ></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"projectName\" label=\"项目名称\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"comp.compName\" label=\"所属竞赛\"></el-table-column>\r\n        <el-table-column align=\"center\" label=\"参与学生人数\" >\r\n          <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.countStudent<scope.row.comp.maxCountStudent\">{{scope.row.countStudent}}人</span>\r\n            <span v-if=\"scope.row.countStudent>=scope.row.comp.maxCountStudent\">{{scope.row.countStudent}}人(满员)</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"参与教师人数\" >\r\n          <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.countTeacher<scope.row.comp.maxCountTeacher\">{{scope.row.countTeacher}}人</span>\r\n            <span v-if=\"scope.row.countTeacher>=scope.row.comp.maxCountTeacher\">{{scope.row.countTeacher}}人(满员)</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"createByTeacher.nickname\" label=\"指导老师\" ></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"createByTeacher.username\" label=\"指导老师用户名\" ></el-table-column>\r\n        <el-table-column align=\"center\" label=\"预算\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{scope.row.pay}}元</span>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import api from '../../main.js'\r\nexport default {\r\n  name: \"admin_project\",\r\n  data() {\r\n    return {\r\n      allComp:[],\r\n      projectVisible:false,\r\n      projectInfo:[],\r\n      activeName: \"竞赛项目列表\",\r\n      createProjectTeacherId:\"\",\r\n      loading: true,\r\n      pagesize: 15,\r\n      currentPage: 1,\r\n      tableData: [],\r\n      xinxiDialogFormVisible: false,\r\n      projectPersonInfo: false,\r\n      projectJoinStudent:[],\r\n      projectJoinTeacher:[],\r\n      searchProjects: {\r\n        projectName:\"\",\r\n        compId:\"\",\r\n        applyState:\"\",\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getAllComp();\r\n    this.getAllProjects();\r\n  },\r\n  methods: {\r\n    getAllComp(){\r\n      let that=this;\r\n      that.$axios\r\n      .post(api+`/comp/getAllComps`)\r\n      .then(function (response) {\r\n        that.allComp=response.data;\r\n      })\r\n    },\r\n    getMoreSearchAllProjects(){\r\n      let that = this;\r\n      let searchForm=new FormData();\r\n      searchForm.append(\"projectName\",that.searchProjects.projectName);\r\n      searchForm.append(\"comp.id\",that.searchProjects.compId);\r\n      searchForm.append(\"applyState\",that.searchProjects.applyState);\r\n      this.$axios\r\n      .post(api+`/project/getMoreSearchAllProjects`,searchForm)\r\n      .then(function(response) {\r\n        that.collegeProjectData = response.data;\r\n      })\r\n      .catch(function(error) {\r\n        that.$message.error(\"系统错误，操作失败，请稍后再试!\");\r\n      });\r\n    },\r\n    current_change(currentPage) {\r\n      //改变当前页\r\n      this.currentPage = currentPage;\r\n    },\r\n    getProjectJoinPersons(project){\r\n      let projectId=project.id;\r\n      this.createProjectTeacherId=project.createByTeacher.id;\r\n      this.projectPersonInfo=true;\r\n      this.getProjectJoinTeacher(projectId);\r\n      this.getProjectJoinStudent(projectId);\r\n    },\r\n    /**\r\n     * 得到参赛的老师\r\n     * @param projectId\r\n     */\r\n    getProjectJoinTeacher(projectId){\r\n      let that=this;\r\n      that.$axios\r\n      .get(api+`/project/getProjectJoinTeacher/`+projectId)\r\n      .then(function (response) {\r\n        that.projectJoinTeacher=response.data;\r\n      })\r\n    },\r\n    /**\r\n     * 得到参赛的学生\r\n     * @param projectId\r\n     */\r\n    getProjectJoinStudent(projectId){\r\n      let that=this;\r\n      that.$axios\r\n      .get(api+`/project/getProjectJoinStudent/`+projectId)\r\n      .then(function (response) {\r\n        that.projectJoinStudent=response.data;\r\n      })\r\n    },\r\n    筛选学院(name) {\r\n      let that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/selectProjectBySchoolName/?name=${name}`\r\n        )\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n        });\r\n    },\r\n    筛选状态(zhuangtai) {\r\n      let that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/selectProjectByZhuangtai/?zhuangtai=${zhuangtai}`\r\n        )\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n        });\r\n    },\r\n    getAllProjects() {\r\n      let that = this;\r\n      // 查询全部已审核项目\r\n      this.$axios\r\n        .get(api+`/admin/getAllProjects`)\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n          that.proNum = response.data.length;\r\n          that.loading = false;\r\n        })\r\n        .catch(function(error) {\r\n          that.loading = false;\r\n        });\r\n    },\r\n    关联查询筛选状态(zhuangtai) {\r\n      var that = this;\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:8088/project/relationProAndCompByZtV/?zhuangtai=${zhuangtai}&visible=1`\r\n        )\r\n        .then(function(response) {\r\n          that.tableData = response.data;\r\n        })\r\n        .catch(function(error) {\r\n        });\r\n    },\r\n    handleClick(tab, event) {\r\n    },\r\n    /**\r\n     * 点击查看项目信息\r\n     * @param projectId\r\n     */\r\n    showProjectInfo(projectId){\r\n      let that=this;\r\n      that.projectVisible=true;\r\n      that.$axios\r\n      .get(api+`/teacher/getProjectById/`+projectId)\r\n      .then(function (response) {\r\n        let newArray=[];\r\n        newArray.push(response.data);\r\n        that.projectInfo=newArray;\r\n      })\r\n\r\n    }\r\n  },\r\n  watch: {\r\n    activeName(val, oldVal) {\r\n      let that = this;\r\n      that.tableData = [];\r\n      switch (that.activeName) {\r\n        case \"竞赛项目审核\":\r\n          that.关联查询筛选状态(\"待审核\");\r\n          break;\r\n        case \"竞赛项目列表\":\r\n          that.getAllProjects();\r\n          break;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-card {\r\n  border-radius: 25px;\r\n}\r\n#fenye {\r\n  text-align: center;\r\n  margin-top: 20px;\r\n}\r\n.xinxiDialog .el-dialog {\r\n  width: 30%;\r\n}\r\n.xinxiDialog textarea.el-textarea__inner {\r\n  height: 180px;\r\n  font-size: 20px;\r\n}\r\n.xinxiDialog .xinxiDialogTitle .el-input__inner {\r\n  font-weight: bold;\r\n  color: chocolate;\r\n}\r\n</style>"],"sourceRoot":"src/views/admin"}]}