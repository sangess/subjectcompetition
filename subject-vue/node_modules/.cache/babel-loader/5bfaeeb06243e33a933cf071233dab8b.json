{"remainingRequest":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\IDEA_workspace2\\subject-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IDEA_workspace2\\subject-vue\\src\\views\\college\\college_work.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IDEA_workspace2\\subject-vue\\src\\views\\college\\college_work.vue","mtime":1622209730948},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IDEA_workspace2\\subject-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport api from \"../../main\";\nexport default {\n  name: \"college_work\",\n  inject: ['reload'],\n  data: function data() {\n    return {\n      work: \"work\",\n      input: 0,\n      fileTip: \"附件\",\n      api: api,\n      tabPosition: \"left\",\n      unOrEd: \"un\",\n      unMarkProjects: [],\n      markWorkProjects: []\n    };\n  },\n  mounted: function mounted() {\n    this.getUnMarkProjects();\n    this.getMarkWorkProjects();\n  },\n  methods: {\n    getMarkWorkProjects: function getMarkWorkProjects() {\n      var that = this;\n      that.$axios.get(api + '/college/getMarkWorkProjects/' + that.$store.state.id).then(function (response) {\n        that.markWorkProjects = response.data;\n        console.log(that.markWorkProjects);\n      });\n    },\n    getUnMarkProjects: function getUnMarkProjects() {\n      var that = this;\n      that.$axios.get(api + '/college/getUnMarkProjects/' + that.$store.state.id).then(function (response) {\n        that.unMarkProjects = response.data;\n      });\n    },\n    markWork: function markWork(workId) {\n      var that = this;\n      var id = this.work + workId;\n      var score = document.getElementById(id).value;\n\n      if (score <= 0) {\n        that.$message.error(score + \"分实在太低了！请重新打分\");\n      } else if (score >= 100) {\n        that.$message.error(\"请在1-99分中评分！\");\n      } else {\n        that.$axios.get(api + \"/college/markWork/\" + score + \"/\" + workId).then(function (response) {\n          that.$message({\n            type: response.data.code = 200 ? \"success\" : \"error\",\n            message: response.data.message\n          });\n          that.reload();\n        });\n      }\n    }\n  },\n  filters: {\n    dataTime: function dataTime(value) {\n      if (value == undefined) return '-';\n      value = new Date(value);\n\n      if (value instanceof Date) {\n        var d = value;\n        var year = d.getFullYear();\n        var m = d.getMonth() + 1;\n        var day = d.getDate() < 10 ? '0' + d.getDate() : d.getDate();\n        var myDate = year + '年' + m + '月 ' + day + '日';\n        return myDate;\n      } else {\n        return \"-\";\n      }\n    }\n  }\n};",{"version":3,"sources":["college_work.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <el-card>\r\n    <el-tabs  v-model=\"unOrEd\" :tab-position=\"tabPosition\">\r\n      <el-tab-pane label=\"未评分的作品\" name=\"un\">\r\n        <el-table :data=\"unMarkProjects\" style=\"width: 100%\">\r\n          <el-table-column type=\"expand\">\r\n            <template slot-scope=\"props\">\r\n              <el-form label-position=\"right\" style=\"background-color: rgba(146,255,152,0.58);border-radius: 20px\" >\r\n                <el-form-item inline  v-for=\"(workFile,index) in props.row.workFiles\" :key =\"workFile.id\" >\r\n                  <el-row :gutter=\"40\">\r\n                    <el-col :span=\"2\"> <span style=\"color: #1402bf;float: right\">{{ fileTip+String((index+1))}}</span></el-col>\r\n                    <el-col :span=\"10\"> <span>{{ workFile.fileName}}</span></el-col>\r\n                    <el-col :span=\"3\"><a :href='api+\"/file/downloadFile/\"+workFile.id'><el-link icon=\"el-icon-download\" :underline=\"false\">下载附件</el-link></a></el-col>\r\n                  </el-row>\r\n                </el-form-item>\r\n              </el-form>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"竞赛 ID\" prop=\"project.comp.id\"></el-table-column>\r\n          <el-table-column label=\"竞赛名\" prop=\"project.comp.compName\"></el-table-column>\r\n          <el-table-column label=\"项目名\" prop=\"project.projectName\"></el-table-column>\r\n          <el-table-column label=\"作品名\" prop=\"workName\"></el-table-column>\r\n          <el-table-column label=\"评分\">\r\n            <template slot-scope=\"scope\">\r\n              <el-input v-model=\"input\" size=\"mini\" style=\"width: 50px;margin-right: 20px\" :id=work+scope.row.id></el-input>\r\n              <el-popconfirm title=\"确认评分吗？\" @confirm=\"markWork(scope.row.id)\">\r\n                <el-button type=\"success\" size=\"mini\"  slot=\"reference\" >保存</el-button>\r\n              </el-popconfirm>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"已评分的比赛\" name=\"ed\">\r\n        <el-table :data=\"markWorkProjects\" style=\"width: 100%\">\r\n          <el-table-column type=\"expand\">\r\n            <template slot-scope=\"props\">\r\n              <el-form label-position=\"right\" style=\"background-color: rgba(146,255,152,0.58);border-radius: 20px\" >\r\n                <el-form-item inline  v-for=\"(work,index) in props.row.projectList\" :key =\"work.id\" >\r\n                  <el-row :gutter=\"40\" >\r\n                    <el-col :span=\"8\"> <span style=\"color: #1402bf;float: right\">名次：{{String((index+1))}}</span></el-col>\r\n                    <el-col :span=\"8\"> <span>作品名：{{work.workName}}</span></el-col>\r\n                    <el-col :span=\"8\"> <span>院系评分:{{work.score}}</span></el-col>\r\n                  </el-row>\r\n                </el-form-item>\r\n              </el-form>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"竞赛 ID\" prop=\"compId\"></el-table-column>\r\n          <el-table-column label=\"竞赛名\" prop=\"compName\"></el-table-column>\r\n          <el-table-column label=\"截至报名日期\" prop=\"notApplyTime\">\r\n            <template slot-scope=\"scope\">\r\n              {{scope.row.notApplyTime|dataTime}}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"比赛时间\" prop=\"occurrenceTime\">\r\n            <template slot-scope=\"scope\">\r\n              {{scope.row.occurrenceTime|dataTime}}\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\n  import api from '../../main'\r\n  export default {\r\n    name: \"college_work\",\r\n    inject:['reload'],\r\n    data(){\r\n      return{\r\n        work:\"work\",\r\n        input:0,\r\n        fileTip:\"附件\",\r\n        api:api,\r\n        tabPosition:\"left\",\r\n        unOrEd:\"un\",\r\n        unMarkProjects:[],\r\n        markWorkProjects:[],\r\n      }\r\n    },\r\n\r\n    mounted() {\r\n      this.getUnMarkProjects();\r\n      this.getMarkWorkProjects();\r\n    },\r\n    methods:{\r\n      getMarkWorkProjects(){\r\n        let that=this;\r\n        that.$axios\r\n          .get(api+'/college/getMarkWorkProjects/'+that.$store.state.id)\r\n          .then(function (response) {\r\n            that.markWorkProjects=response.data;\r\n            console.log(that.markWorkProjects);\r\n          });\r\n\r\n      },\r\n\r\n      getUnMarkProjects(){\r\n        let that=this;\r\n        that.$axios\r\n        .get(api+'/college/getUnMarkProjects/'+that.$store.state.id)\r\n        .then(function (response) {\r\n          that.unMarkProjects=response.data;\r\n        })\r\n      },\r\n\r\n      markWork(workId){\r\n        let that=this;\r\n        let id=this.work+workId;\r\n        let score=document.getElementById(id).value;\r\n        if(score<=0){\r\n          that.$message.error(score+\"分实在太低了！请重新打分\");\r\n        }else if(score>=100){\r\n          that.$message.error(\"请在1-99分中评分！\");\r\n        }else{\r\n          that.$axios\r\n            .get(api+\"/college/markWork/\"+score+\"/\"+workId)\r\n            .then(function (response) {\r\n              that.$message({\r\n                type:response.data.code=200?\"success\":\"error\",\r\n                message:response.data.message\r\n              });\r\n              that.reload();\r\n            })\r\n        }\r\n      }\r\n    },\r\n    filters:{\r\n      dataTime: function(value) {\r\n        if (value==undefined)\r\n          return '-';\r\n        value = new Date(value)\r\n        if (value instanceof Date) {\r\n          var d = value;\r\n          var year=d.getFullYear();\r\n          var m = d.getMonth() + 1;\r\n          var day = d.getDate() < 10 ? '0' + d.getDate() : d.getDate();\r\n          var myDate = year + '年'+m + '月 ' + day +'日';\r\n          return myDate;\r\n        } else {\r\n          return \"-\";\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n\r\n"],"sourceRoot":"src/views/college"}]}